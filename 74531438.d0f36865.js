(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{109:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return p}));var r=t(2),a=t(6),o=(t(0),t(173)),i={id:"api_definition_crs",title:"Api Definition",sidebar_label:"Api Definition"},c={unversionedId:"workloads/azure/frontend/api_definition_crs",id:"workloads/azure/frontend/api_definition_crs",isDocsHomePage:!1,title:"Api Definition",description:"The generated scaffolding can be quickly used make calls to external APIs",source:"@site/docs/workloads/azure/frontend/API_CRS.md",slug:"/workloads/azure/frontend/api_definition_crs",permalink:"/stacks/docs/workloads/azure/frontend/api_definition_crs",version:"current",sidebar_label:"Api Definition",sidebar:"docs",previous:{title:"Environment Variables",permalink:"/stacks/docs/workloads/azure/frontend/environment_variables_nodejs_crs"},next:{title:"Logging and Instrumentation",permalink:"/stacks/docs/workloads/azure/frontend/logging_node_js_crs"}},s=[],l={rightToc:s};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The generated scaffolding can be quickly used make calls to external APIs\nmeaning another endpoint either within your system developed by another team or\na public endpoint of 3rd party provider e.g. ",Object(o.b)("inlineCode",{parentName:"p"},"hotels.com")," etc..."),Object(o.b)("p",null,"The backend (and frontend) uses the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/axios/axios"}),"axios"),"\nlibrary as the HTTPclient."),Object(o.b)("p",null,"It is on purpose left as a thin wrapper implementation so that the user can\nextend with additional parameters on top of the mandated ones; ",Object(o.b)("inlineCode",{parentName:"p"},"url"),", ",Object(o.b)("inlineCode",{parentName:"p"},"method")," -\ne.g. a header for authentication. As such it only returns an unopinionated axios\nInstance and not a method initialized implementation. the method paratemer is\nmainly used as a type guard."),Object(o.b)("p",null,"Sample implementation of an entire API can be found in the\n",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"../src/state/ducks/get-menus"}),"menu api"),", this demonstrates how to setup a saga to fetch a specific business endpoint."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'\nexport const fetchMenus = () =>\n    action(GetMenuActionTypes.FETCH_POSTS, [], {\n        method: "get" as Method,\n        route: "/menu", // Todo: Point to deployed example API\n    })\n\n\n')),Object(o.b)("p",null,"The specific saga implementation is ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"../src/state/ducks/get-menus/saga"}),"menu api")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'\n\nimport {all, call, fork, put, takeEvery} from "redux-saga/effects"\nimport {\n    MetaActionWithAPI,\n    GetMenuActionTypes,\n    MenuItem,\n} from "../../../interfaces/sagas.interface"\nimport apiCaller from "../../../services/apiCaller"\nimport {fetchMenusError, fetchMenusSuccess} from "./actions"\n\nfunction* handleFetch(action: MetaActionWithAPI): Generator {\n    try {\n        // eslint-disable-next-line\n        const res: MenuItem[] | any = yield call(\n            apiCaller,\n            action.meta.method,\n            action.meta.route,\n        )\n        yield put(fetchMenusSuccess(res))\n    } catch (err) {\n        if (err instanceof Error) {\n            console.error(err)\n            yield put(fetchMenusError(err.message))\n        } else {\n            yield put(fetchMenusError("An unknown error occurred."))\n        }\n    }\n}\n\nfunction* watchFetchRequest(): Generator {\n    yield takeEvery(GetMenuActionTypes.FETCH_POSTS, handleFetch)\n}\n\nexport default function* postSaga() {\n    yield all([fork(watchFetchRequest)])\n}\n\n')),Object(o.b)("p",null,"Feel free to modify the example code for your own API endpoints!"))}p.isMDXComponent=!0},173:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),p=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=p(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},f=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(t),f=r,m=u["".concat(i,".").concat(f)]||u[f]||d[f]||o;return t?a.a.createElement(m,c(c({ref:n},l),{},{components:t})):a.a.createElement(m,c({ref:n},l))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=f;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=t[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}f.displayName="MDXCreateElement"}}]);