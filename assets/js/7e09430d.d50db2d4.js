"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[6545],{5072:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=n(4848),s=n(8453);const i={id:"testing_java_serenity_bdd",title:"UI Browser Automation with Serenity BDD and Java",sidebar_label:"Java - Serenity BDD",description:"UI tests with Serenity BDD and Java",keywords:["serenity","tests","testing","ui","java","template","example","run the tests","run tests by tag","serenity report"]},o=void 0,a={id:"testing/testing_java_serenity_bdd",title:"UI Browser Automation with Serenity BDD and Java",description:"UI tests with Serenity BDD and Java",source:"@site/docs/testing/java_testing_serenity_bdd.md",sourceDirName:"testing",slug:"/testing/testing_java_serenity_bdd",permalink:"/docs/testing/testing_java_serenity_bdd",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"testing_java_serenity_bdd",title:"UI Browser Automation with Serenity BDD and Java",sidebar_label:"Java - Serenity BDD",description:"UI tests with Serenity BDD and Java",keywords:["serenity","tests","testing","ui","java","template","example","run the tests","run tests by tag","serenity report"]},sidebar:"docs",previous:{title:"Accessibility Testing",permalink:"/docs/testing/testing_in_nx/cypress_accessibility_testing"},next:{title:"C# - Selenium .NET",permalink:"/docs/testing/testing_dotnet_selenium"}},l={},c=[{value:"Getting started",id:"getting-started",level:2},{value:"Configurations",id:"configurations",level:3},{value:"Browser Download Location",id:"browser-download-location",level:3},{value:"Configure the serenity.properties",id:"configure-the-serenityproperties",level:3},{value:"Run Tests Locally",id:"run-tests-locally",level:3},{value:"Test Report",id:"test-report",level:3},{value:"Manual Aggregation of the Test Report",id:"manual-aggregation-of-the-test-report",level:3},{value:"Running tests in parallel threads Using forks",id:"running-tests-in-parallel-threads-using-forks",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["In the Java world there are few tools that provide an easier experience with adding behaviour driven development to your automated testing better than ",(0,r.jsx)(t.a,{href:"http://serenity-bdd.info/#/",children:"Serenity BDD"}),".  Not only is it very easy to use but it also adds a rich layer of reporting to your automated testing framework which is crucial for project management and keeping your stakeholders informed."]}),"\n",(0,r.jsx)(t.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,r.jsx)(t.p,{children:"Serenity BDD provides excellent integrations with Selenium, which allows you to avoid a lot of the boilerplate and infrastructure code you normally need to deal with in automated web tests.\nIn particular, Serenity manages the driver lifecycle for you (so you don\u2019t need to create your own driver instances or close them at the end of the tests)."}),"\n",(0,r.jsx)(t.p,{children:"Serenity can also be configured to automatically take screenshots throughout the tests, creating rich documentation of how each test played out."}),"\n",(0,r.jsx)(t.p,{children:'When you write your tests in a fluent, readable manner, these screenshots become part of the "living documentation" of your application.'}),"\n",(0,r.jsx)(t.h3,{id:"configurations",children:"Configurations"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"https://github.com/Ensono/stacks-webapp-template/blob/master/packages/scaffolding-cli/templates/test/xxENSONOxx.xxSTACKSxx.E2E.Serenity/src/test/resources/serenity.conf",children:"Serenity conf"})," file need to be configured."]}),"\n",(0,r.jsxs)(t.p,{children:["The following properties for different environments are required in the ",(0,r.jsx)(t.code,{children:"src/test/resources/serenity.conf"})," configuration file."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"webdriver.base.url\napi.base.url\n"})}),"\n",(0,r.jsx)(t.h3,{id:"browser-download-location",children:"Browser Download Location"}),"\n",(0,r.jsx)(t.p,{children:"If you wish to use a local instance of Serenity Webdriver, make sure to download the correct WebDriver file for the desired browser."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/operasoftware/operachromiumdriver/releases",children:"Opera"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/mozilla/geckodriver/releases",children:"Firefox"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"http://chromedriver.chromium.org/downloads",children:"Chrome"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver",children:"Internet Explorer"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://blogs.windows.com/msedgedev/2015/07/23/bringing-automated-testing-to-microsoft-edge-through-webdriver/",children:"Microsoft Edge"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"configure-the-serenityproperties",children:"Configure the serenity.properties"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"serenity.take.screenshots"})," - Set this property to have more finer control on how screenshots are taken."]}),"\n",(0,r.jsx)(t.p,{children:"This property can take the following values:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"FOR_EACH_ACTION"}),": Saves a screenshot at every web element action (like click(), typeAndEnter(), type(), typeAndTab() etc.)."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"BEFORE_AND_AFTER_EACH_STEP"}),": Saves a screenshot before and after every step."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"AFTER_EACH_STEP"}),": Saves a screenshot after every step"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"FOR_FAILURES"}),": Saves screenshots only for failing steps."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"DISABLED"}),": Does not save screenshots for any steps."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The default value is ",(0,r.jsx)(t.code,{children:"serenity.take.screenshots=BEFORE_AND_AFTER_EACH_STEP"})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"webdriver.driver"})," - The browser you want to run the tests in: firefox, chrome, phantomjs or iexplorer."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"webdriver.chrome.driver"})," - Path to the Chrome driver, if it is not on the system path."]}),"\n",(0,r.jsxs)(t.p,{children:["More properties here: ",(0,r.jsx)(t.a,{href:"https://serenity-bdd.github.io/theserenitybook/latest/serenity-system-properties.html",children:"Serenity System Properties"})]}),"\n",(0,r.jsx)(t.h3,{id:"run-tests-locally",children:"Run Tests Locally"}),"\n",(0,r.jsxs)(t.p,{children:["To run the web tests with a given driver, please provide the path to the webdriver file using the system property: ",(0,r.jsx)(t.code,{children:"webdriver.driver_name.driver"}),". For example, your serenity.properties file should contain the following:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"webdriver.driver=chrome\nwebdriver.chrome.driver=/path/to/my/chromedriver\n"})}),"\n",(0,r.jsx)(t.p,{children:"Open the project folder in the terminal and execute tests by running any one of the following commands:"}),"\n",(0,r.jsx)(t.p,{children:"Run all tests on the default environment:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mvn clean verify\n"})}),"\n",(0,r.jsx)(t.p,{children:"Run all tests on the specific environment e.g. staging:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mmvn clean verify -Denvironment=staging\n"})}),"\n",(0,r.jsx)(t.p,{children:"Run Smoke tests only:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.options="--tags @Smoke"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Run Functional tests only:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.options="--tags @Functional"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Run tests by other tags and ignore tests that contain @Ignore tags:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'mvn clean verify verify -Dcucumber.options="--tags ~@Ignore --tags @YourTag"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"test-report",children:"Test Report"}),"\n",(0,r.jsxs)(t.p,{children:["As a result of the test execution - serenity-maven-plugin will automatically generate the test report with name - ",(0,r.jsx)(t.code,{children:"index.html"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"Test Report Location is: ..target/site/serenity/index.html\n"})}),"\n",(0,r.jsx)(t.h3,{id:"manual-aggregation-of-the-test-report",children:"Manual Aggregation of the Test Report"}),"\n",(0,r.jsx)(t.p,{children:"Open the project folder in the terminal and execute:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"mvn serenity:aggregate\n"})}),"\n",(0,r.jsx)(t.h3,{id:"running-tests-in-parallel-threads-using-forks",children:"Running tests in parallel threads Using forks"}),"\n",(0,r.jsx)(t.p,{children:"Using multiple forks can be a good alternative to running all tests in a single JVM, and can reduce the risk of certain types of errors."}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"Choosing the right forking strategy and parallel execution settings can have a substantial impact on the memory requirements and the execution time of the build system."})}),"\n",(0,r.jsx)(t.p,{children:"Using Forked Test Execution, new JVM processes are spun up to execute the tests, up to a configurable maximum number of processes."}),"\n",(0,r.jsx)(t.p,{children:"This creates better separation between tests, which can improve their reliability."}),"\n",(0,r.jsx)(t.p,{children:"Maven is set to spawn new processes by the forkCount configuration element, as shown here below."}),"\n",(0,r.jsx)(t.p,{children:'This can either be a number (the maximum number of forks) or a multiplier (the number of forks per CPU). The current configuration uses the value of "2", which means 2 forked processes per CPU:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:" <plugin>\n    <artifactId>maven-failsafe-plugin</artifactId>\n    <version>2.22.2</version>\n    <configuration>\n        <parallel>classes</parallel>\n        <threadCount>2</threadCount>\n        <forkCount>2</forkCount>\n    </configuration>\n</plugin>\n"})}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsx)(t.p,{children:"The more threads are used, the higher the chances of sporadic, hard-to-reproduce test failures due to timeouts and other related issues. The added performance gain of each thread also tends to drop off for higher numbers of threads."})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var r=n(6540);const s={},i=r.createContext(s);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);