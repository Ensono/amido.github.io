"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[8249,4696],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return g}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=r,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},6396:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(7462),r=n(7294),i=n(2389),o=n(9443);var s=function(){var e=(0,r.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},l=n(9521),c=n(6010),p={tabItem:"tabItem_vU9c"};function u(e){var t,n,a,i=e.lazy,o=e.block,u=e.defaultValue,m=e.values,d=e.groupId,g=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=m?m:h.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),k=(0,l.lx)(f,(function(e,t){return e.value===t.value}));if(k.length>0)throw new Error('Docusaurus error: Duplicate values "'+k.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var v=null===u?u:null!=(t=null!=u?u:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(a=h[0])?void 0:a.props.value;if(null!==v&&!f.some((function(e){return e.value===v})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+f.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=s(),y=b.tabGroupChoices,N=b.setTabGroupChoices,w=(0,r.useState)(v),x=w[0],z=w[1],T=[],C=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var I=y[d];null!=I&&I!==x&&f.some((function(e){return e.value===I}))&&z(I)}var A=function(e){var t=e.currentTarget,n=T.indexOf(t),a=f[n].value;a!==x&&(C(t),z(a),null!=d&&N(d,a))},O=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=T.indexOf(e.currentTarget)+1;n=T[a]||T[0];break;case"ArrowLeft":var r=T.indexOf(e.currentTarget)-1;n=T[r]||T[T.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":o},g)},f.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,className:(0,c.Z)("tabs__item",p.tabItem,{"tabs__item--active":x===t}),key:t,ref:function(e){return T.push(e)},onKeyDown:O,onFocus:A,onClick:A},null!=n?n:t)}))),i?(0,r.cloneElement)(h.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function m(e){var t=(0,i.Z)();return r.createElement(u,(0,a.Z)({key:String(t)},e))}},9443:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},6309:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={},l=void 0,c={unversionedId:"nx/azure-react/generator-app-insights-web",id:"nx/azure-react/generator-app-insights-web",isDocsHomePage:!1,title:"generator-app-insights-web",description:"@ensono-stacks/azure-react:app-insights-web",source:"@site/docs/nx/azure-react/generator-app-insights-web.md",sourceDirName:"nx/azure-react",slug:"/nx/azure-react/generator-app-insights-web",permalink:"/docs/nx/azure-react/generator-app-insights-web",tags:[],version:"current",frontMatter:{}},p=[{value:"@ensono-stacks/azure-react:app-insights-web",id:"ensono-stacksazure-reactapp-insights-web",children:[],level:3},{value:"Usage",id:"usage",children:[{value:"Command line arguments",id:"command-line-arguments",children:[],level:3},{value:"Generator Output",id:"generator-output",children:[],level:3},{value:"Using Application Insights",id:"using-application-insights",children:[],level:3}],level:2}],u={toc:p},m="wrapper";function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)(m,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"ensono-stacksazure-reactapp-insights-web"},"@ensono-stacks/azure-react:app-insights-web"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Installs and configures a ReactJS Library with App Insights."),(0,i.kt)("p",null,"This enables the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Tracking of router changes"),(0,i.kt)("li",{parentName:"ul"},"React components usage statistics")),(0,i.kt)("p",null,"This generator will create a new ReactJS Library with ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@microsoft/applicationinsights-react-js"},"applicationinsights reactjs")," and ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@microsoft/applicationinsights-web"},"applicationinsights web")," npm packages installed and configured for you. This can then be imported an used in an existing ReactJS application."),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx generate @ensono-stacks/azure-react:app-insights-web\n")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"App insights requires the connection string environment variable to be set to the value set within Azure. The name of the connection string variable is set in the generator options ",(0,i.kt)("inlineCode",{parentName:"p"},"--connectionString"),". Please see ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-gb/azure/azure-monitor/app/sdk-connection-string?tabs=net"},"documentation on connection strings")," for more information"))),(0,i.kt)("h3",{id:"command-line-arguments"},"Command line arguments"),(0,i.kt)("p",null,"The following command line arguments are available:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--name"),(0,i.kt)("td",{parentName:"tr",align:null},"Library name"),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Required")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--connectionString"),(0,i.kt)("td",{parentName:"tr",align:null},"The env variable for the connection string."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Required")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--directory"),(0,i.kt)("td",{parentName:"tr",align:null},"A directory where the lib is placed."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--importPath"),(0,i.kt)("td",{parentName:"tr",align:null},"What import path would you like to use for the library?."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--tags"),(0,i.kt)("td",{parentName:"tr",align:null},"Add tags to the library (used for linting)."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")))),(0,i.kt)("h3",{id:"generator-output"},"Generator Output"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adds an app insights config file")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/src/app-insights-config.ts"',title:'"/src/app-insights-config.ts"'},"// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  DistributedTracingModes,\n  IConfig,\n} from '@microsoft/applicationinsights-common';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport type { IConfiguration } from '@microsoft/applicationinsights-core-js';\n\nconst appInsightConfig: IConfiguration & IConfig = {\n  enableAutoRouteTracking: false,\n  enableCorsCorrelation: true,\n  enableRequestHeaderTracking: true,\n  enableResponseHeaderTracking: true,\n  disableFetchTracking: false,\n  distributedTracingMode: DistributedTracingModes.AI_AND_W3C,\n  enableAjaxPerfTracking: true\n};\n\nexport default appInsightConfig;\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adds a telemetry provider ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/src/telemetry-provider.tsx"',title:'"/src/telemetry-provider.tsx"'},"import {\n  ReactPlugin,\n  AppInsightsContext,\n} from '@microsoft/applicationinsights-react-js';\nimport { ApplicationInsights } from '@microsoft/applicationinsights-web';\nimport { FC, ReactNode } from 'react';\n\nimport appInsightConfig from './app-insights-config';\n\nconst reactPlugin = new ReactPlugin();\nconst connectionString = process.env.<%= connectionString %>;\n\nexport const appInsights = new ApplicationInsights({\n  config: {\n    connectionString,\n    ...appInsightConfig,\n    extensions: [reactPlugin],\n  },\n});\n\nif (!appInsights.appInsights.isInitialized()) {\n  appInsights.loadAppInsights();\n}\n\nexport const TelemetryProvider: FC<{ children?: ReactNode }> = ({ children }) => (\n  <AppInsightsContext.Provider value={reactPlugin}>\n    {children}\n  </AppInsightsContext.Provider>\n);\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Installs and adds microsoft applicationinsights packages to package.json")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/package.json"',title:'"/package.json"'},'  "dependencies": {\n    ...OtherDependencies\n    "@microsoft/applicationinsights-react-js": "3.4.0",\n    "@microsoft/applicationinsights-web": "2.8.9",\n  }\n}\n')),(0,i.kt)("h3",{id:"using-application-insights"},"Using Application Insights"),(0,i.kt)("p",null,"To use the Application Insights react hooks within your application please import the generated library and wrap your application in the TelemetryProvider installed by the generator for example "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"import NxWelcome from './nx-welcome';\nimport { TelemetryProvider } from 'packages/nameOfGeneratedAppInsightsLibrary/src';\n\nexport function App() {\n    return (\n        <TelemetryProvider>\n            <NxWelcome title=\"welcome title\" />\n            <div />\n        </TelemetryProvider>\n    );\n}\n\nexport default App;\n\n")),(0,i.kt)("p",null,"From here a ",(0,i.kt)("inlineCode",{parentName:"p"},"useAppInsightsContext")," hook will be available to use anywhere within your ReactJS App. For example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'import React from "react";\nimport { useAppInsightsContext } from "@microsoft/applicationinsights-react-js";\n\nconst MyComponent = () => {\n    const appInsights = useAppInsightsContext();\n    const metricData = {\n        average: engagementTime,\n        name: "React Component Engaged Time (seconds)",\n        sampleCount: 1\n      };\n    const additionalProperties = { "Component Name": \'MyComponent\' };\n    appInsights.trackMetric(metricData, additionalProperties);\n    \n    return (\n        <h1>My Component</h1>\n    );\n}\nexport default MyComponent;\n')),(0,i.kt)("p",null,"Full documentation and a getting started guide can be found at ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-gb/azure/azure-monitor/app/javascript-react-plugin"},"React plug-in for Application Insights JavaScript SDK"))))}d.isMDXComponent=!0},8455:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return u},default:function(){return f},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(6309),s=n(6396),l=n(8215),c=["components"],p={id:"ensono-stacks-azure-react",title:"@ensono-stacks/azure-react",sidebar_label:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",keywords:["Nx","monorepo","stacks","ensono","azure-react","generator","executor","appinsights"]},u=void 0,m={unversionedId:"nx/azure-react/ensono-stacks-azure-react",id:"nx/azure-react/ensono-stacks-azure-react",isDocsHomePage:!1,title:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",source:"@site/docs/nx/azure-react/plugin-information.md",sourceDirName:"nx/azure-react",slug:"/nx/azure-react/ensono-stacks-azure-react",permalink:"/docs/nx/azure-react/ensono-stacks-azure-react",tags:[],version:"current",frontMatter:{id:"ensono-stacks-azure-react",title:"@ensono-stacks/azure-react",sidebar_label:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",keywords:["Nx","monorepo","stacks","ensono","azure-react","generator","executor","appinsights"]}},d=[{value:"Setting up @ensono-stacks/azure-react",id:"setting-up-ensono-stacksazure-react",children:[],level:2},{value:"Executors and Generators",id:"executors-and-generators",children:[{value:"Generators",id:"generators",children:[],level:3}],level:2}],g={toc:d},h="wrapper";function f(e){var t=e.components,n=(0,r.Z)(e,c);return(0,i.kt)(h,(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Configures your ReactJS application to use various Azure services:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/applicationinsights"},"App Insights")),(0,i.kt)("li",{parentName:"ul"},"...more to come.")),(0,i.kt)("h2",{id:"setting-up-ensono-stacksazure-react"},"Setting up @ensono-stacks/azure-react"),(0,i.kt)("p",null,"Install the ",(0,i.kt)("inlineCode",{parentName:"p"},"@ensono-stacks/azure-react")," plugin with the following command:"),(0,i.kt)(s.Z,{mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"npm",label:"npm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev @ensono-stacks/azure-react@latest\n"))),(0,i.kt)(l.Z,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add --dev @ensono-stacks/azure-react@latest\n")))),(0,i.kt)("h2",{id:"executors-and-generators"},"Executors and Generators"),(0,i.kt)("p",null,"To see a list of the plugin capabilities run the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx list @ensono-stacks/azure-react\n")),(0,i.kt)("p",null,"View additional information about a plugin capability through the following commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx g @ensono-stacks/azure-react:app-insights-web --help\n")),(0,i.kt)("h3",{id:"generators"},"Generators"),(0,i.kt)(o.default,{mdxType:"GeneratorAppInsights"}))}f.isMDXComponent=!0}}]);