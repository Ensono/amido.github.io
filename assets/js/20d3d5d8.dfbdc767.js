"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[3975],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7294),r=n(6010),l={tabItem:"tabItem_Ymn6"};function o(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(7462),r=n(7294),l=n(6010),o=n(2466),i=n(6550),s=n(1980),u=n(7392),p=n(12);function c(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function d(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:c(n);return function(e){var t=(0,u.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function h(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,l=(0,i.k6)(),o=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((function(e){if(o){var t=new URLSearchParams(l.location.search);t.set(o,e),l.replace(Object.assign({},l.location,{search:t.toString()}))}}),[o,l])]}function f(e){var t,n,a,l,o=e.defaultValue,i=e.queryString,s=void 0!==i&&i,u=e.groupId,c=d(e),f=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:o,tabValues:c})})),g=f[0],v=f[1],k=h({queryString:s,groupId:u}),b=k[0],y=k[1],N=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),n=(0,p.Nk)(t),a=n[0],l=n[1],[a,(0,r.useCallback)((function(e){t&&l.set(e)}),[t,l])]),w=N[0],E=N[1],S=function(){var e=null!=b?b:w;return m({value:e,tabValues:c})?e:null}();return(0,r.useLayoutEffect)((function(){S&&v(S)}),[S]),{selectedValue:g,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:c}))throw new Error("Can't select invalid tab value="+e);v(e),y(e),E(e)}),[y,E,c]),tabValues:c}}var g=n(2389),v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){var t=e.className,n=e.block,i=e.selectedValue,s=e.selectValue,u=e.tabValues,p=[],c=(0,o.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==i&&(c(t),s(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,r=p.indexOf(e.currentTarget)+1;n=null!=(a=p[r])?a:p[0];break;case"ArrowLeft":var l,o=p.indexOf(e.currentTarget)-1;n=null!=(l=p[o])?l:p[p.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},u.map((function(e){var t=e.value,n=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:function(e){return p.push(e)},onKeyDown:m,onClick:d},o,{className:(0,l.Z)("tabs__item",v.tabItem,null==o?void 0:o.className,{"tabs__item--active":i===t})}),null!=n?n:t)})))}function b(e){var t=e.lazy,n=e.children,a=e.selectedValue,l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var o=l.find((function(e){return e.props.value===a}));return o?(0,r.cloneElement)(o,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function y(e){var t=f(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",v.tabList)},r.createElement(k,(0,a.Z)({},e,t)),r.createElement(b,(0,a.Z)({},e,t)))}function N(e){var t=(0,g.Z)();return r.createElement(y,(0,a.Z)({key:String(t)},e))}},1619:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.next,n=e.prev;return a.useEffect((function(){if(t){var e=document.querySelector("div.pagination-nav__item.pagination-nav__item--next>a");e&&e.style&&(e.style.display="none")}if(n){var a=document.querySelector("div.pagination-nav__item>a");a&&a.style&&(a.style.display="none")}})),a.createElement("div",null)}},3179:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return c},default:function(){return v},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return h}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),o=n(4866),i=n(5162),s=n(1619),u=["components"],p={id:"getting_started_csr",title:"Getting Started",sidebar_label:"Getting Started",hide_title:!1,hide_table_of_contents:!1,description:"Getting started with CSR",keywords:["rest","api","csr","scaffolding","template","example","backend","axios","bootstrap","dependencies","start project","client","side","rendering","client side rendering"]},c=void 0,d={unversionedId:"workloads/azure/frontend-archived/CSR/getting_started_csr",id:"workloads/azure/frontend-archived/CSR/getting_started_csr",title:"Getting Started",description:"Getting started with CSR",source:"@site/docs/workloads/azure/frontend-archived/CSR/getting_started_csr.md",sourceDirName:"workloads/azure/frontend-archived/CSR",slug:"/workloads/azure/frontend-archived/CSR/getting_started_csr",permalink:"/docs/workloads/azure/frontend-archived/CSR/getting_started_csr",draft:!1,tags:[],version:"current",frontMatter:{id:"getting_started_csr",title:"Getting Started",sidebar_label:"Getting Started",hide_title:!1,hide_table_of_contents:!1,description:"Getting started with CSR",keywords:["rest","api","csr","scaffolding","template","example","backend","axios","bootstrap","dependencies","start project","client","side","rendering","client side rendering"]}},m={},h=[{value:"Bootstrap your framework",id:"bootstrap-your-framework",level:2},{value:"Get developing in just a few questions",id:"get-developing-in-just-a-few-questions",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Get developing",id:"get-developing",level:2},{value:"Implementation details",id:"implementation-details",level:2},{value:"Development",id:"development",level:3},{value:"Production",id:"production",level:3},{value:"Making a Progressive Web App",id:"making-a-progressive-web-app",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Cypress: Functional Testing",id:"cypress-functional-testing",level:2},{value:"Environment variables",id:"environment-variables-1",level:2},{value:"Scripts",id:"scripts",level:2},{value:"Customising",id:"customising",level:2},{value:"Feedback",id:"feedback",level:2}],f={toc:h},g="wrapper";function v(e){var t=e.components,n=(0,r.Z)(e,u);return(0,l.kt)(g,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Web applications require a lot of boilerplate. It's also hard to know how to get started without examples.\nWe offer both server side rendered (SSR) and client side rendered (CSR) solutions that can be\nbootstrapped and tailored to your current project with just one command."),(0,l.kt)("p",null,"Oh, and they come complete with Infrastructure As Code so you can deploy on your cloud of choice."),(0,l.kt)("p",null,"Brilliant."),(0,l.kt)("h2",{id:"bootstrap-your-framework"},"Bootstrap your framework"),(0,l.kt)("p",null,"Packages for templating SSR Node.js with React apps with little build configuration.\nThe best way to get started, is bootstrap the framework using the scaffolding-cli from Ensono Stacks.\nBy using it in the interactive mode, you can simply answer few questions to get a bespoke framework,\nready to go with an example test."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Run to start configuring your solution"',title:'"Run',to:!0,start:!0,configuring:!0,your:!0,'solution"':!0},"npx @amidostacks/scaffolding-cli run -i\n")),(0,l.kt)("h3",{id:"get-developing-in-just-a-few-questions"},"Get developing in just a few questions"),(0,l.kt)("h2",{id:"environment-variables"},"Environment Variables"),(0,l.kt)("p",null,"Before you can start developing you'll need to replace your environment variables with the appropriate values.\nThese values will be automatically picked up and used by the underlying server and web client."),(0,l.kt)(o.Z,{defaultValue:"linux",values:[{label:"Linux/MacOS",value:"linux"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"windows",mdxType:"TabItem"},(0,l.kt)("div",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"set NODE_ENV=development\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"set PORT=3000\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'set NODE_ENV: process.env.NODE_ENV || "development"\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"set PUBLIC_URL: publicUrl\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"set APP_BASE_PATH: ## Stacks base path\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"set MENU_API_URL: ## Used by the internal API fetcher\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Instrumentation Key"',title:'"Instrumentation','Key"':!0},"set APPINSIGHTS_INSTRUMENTATIONKEY:{Set instrumentation hey here}\n")))),(0,l.kt)(i.Z,{value:"linux",mdxType:"TabItem"},(0,l.kt)("div",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export NODE_ENV=development\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export PORT=3000\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'export NODE_ENV: process.env.NODE_ENV || "development"\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export PUBLIC_URL: publicUrl\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export APP_BASE_PATH: ## Stacks base path\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export MENU_API_URL: ## Used by the internal API fetcher\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Instrumentation Key"',title:'"Instrumentation','Key"':!0},"export APPINSIGHTS_INSTRUMENTATIONKEY:<Instrumentation Key here>\n"))))),(0,l.kt)("h2",{id:"get-developing"},"Get developing"),(0,l.kt)("p",null,"CSR webapp is bootstrapped from\n",(0,l.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/getting-started"},"Create-React-App")),(0,l.kt)("h2",{id:"implementation-details"},"Implementation details"),(0,l.kt)("p",null,"The template is a Client Side Rendered (CSR) implementation using:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://reactjs.org/"},"React.js")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://jestjs.io/"},"Jest")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.cypress.io/"},"Cypress"))),(0,l.kt)("p",null,"At the end of bootstrapping your example framework you'll have an output that will contain all the:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"dependencies"),(0,l.kt)("li",{parentName:"ul"},"scripts"),(0,l.kt)("li",{parentName:"ul"},"example tests"),(0,l.kt)("li",{parentName:"ul"},"pipelines"),(0,l.kt)("li",{parentName:"ul"},"information needed to start testing")),(0,l.kt)("h3",{id:"development"},"Development"),(0,l.kt)("p",null,"If you like to view the github repository , the source code can be found ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Ensono/stacks-typescript-csr"},"here")),(0,l.kt)("p",null,"Move to the ",(0,l.kt)("inlineCode",{parentName:"p"},"<PROJECT-NAME>/src")," folder and run the next commands"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n")),(0,l.kt)("p",null,"This offers live reload of client side code and server side code ",(0,l.kt)("em",{parentName:"p"},"if you're using ssr"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm start\n")),(0,l.kt)("p",null,"Runs the app in the development mode.",(0,l.kt)("br",null)," Open ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:3001"},"http://localhost:3001")," to view it in the browser."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"For local development, you will need to start the server to host the webapp under dev.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Note: To avoid running the CSR in localhost CORS issues we can run the SSR app in the background and use MENU_API_URL env point to http://localhost:3000\n")),(0,l.kt)("p",null,"The page will reload if you make edits.",(0,l.kt)("br",null)," You will also see any lint errors\nin the console."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run test\n")),(0,l.kt)("p",null,"Launches the test runner in the interactive watch mode.",(0,l.kt)("br",null)," See the section\nabout\n",(0,l.kt)("a",{parentName:"p",href:"https://facebook.github.io/create-react-app/docs/running-tests"},"running tests"),"\nfor more information."),(0,l.kt)("h3",{id:"production"},"Production"),(0,l.kt)("p",null,"Move to the ",(0,l.kt)("inlineCode",{parentName:"p"},"<PROJECT-NAME>/src")," folder and run the next commands"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")),(0,l.kt)("p",null,"Builds the app for production to the ",(0,l.kt)("inlineCode",{parentName:"p"},"dist")," folder.",(0,l.kt)("br",null)," It correctly bundles\nReact in production mode and optimizes the build for the best performance."),(0,l.kt)("p",null,"The build is minified and the filenames include the hashes.",(0,l.kt)("br",null)," Your app is\nready to be deployed!"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start\n")),(0,l.kt)("p",null,"This will start the app in production mode so you can see how it will behave when deployed."),(0,l.kt)("h2",{id:"making-a-progressive-web-app"},"Making a Progressive Web App"),(0,l.kt)("p",null,"This section has moved here:\n",(0,l.kt)("a",{parentName:"p",href:"https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app"},"https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app")),(0,l.kt)("h2",{id:"advanced-configuration"},"Advanced Configuration"),(0,l.kt)("p",null,"This section has moved here:\n",(0,l.kt)("a",{parentName:"p",href:"https://facebook.github.io/create-react-app/docs/advanced-configuration"},"https://facebook.github.io/create-react-app/docs/advanced-configuration")),(0,l.kt)("h2",{id:"cypress-functional-testing"},"Cypress: Functional Testing"),(0,l.kt)("p",null,"Compile and watch for code changes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run test:cypress:watch\n")),(0,l.kt)("p",null,"Run locally in\n",(0,l.kt)("a",{parentName:"p",href:"https://docs.cypress.io/guides/guides/command-line.html#cypress-open"},"Cypress Test Runner"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm run test:cypress:open\n")),(0,l.kt)("h2",{id:"environment-variables-1"},"Environment variables"),(0,l.kt)("p",null,"We need to ensure that Cypress knows the following at a minimum:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"protocol (e.g. http)"),(0,l.kt)("li",{parentName:"ul"},"host (e.g. google.com)"),(0,l.kt)("li",{parentName:"ul"},"path (e.g. /images)")),(0,l.kt)("p",null,"All variables should be pulled in using the same method the app does. In this\ncase, this is all done in ",(0,l.kt)("inlineCode",{parentName:"p"},"cypress/plugins/index.config.js")),(0,l.kt)("h2",{id:"scripts"},"Scripts"),(0,l.kt)("p",null,"For all Cypress oriented scripts, see the below file in the CSR source code\n",(0,l.kt)("inlineCode",{parentName:"p"},"test:cypress - ./package.json")),(0,l.kt)("h2",{id:"customising"},"Customising"),(0,l.kt)("p",null,"Since the frameworks provide real examples on deployed applications, we recommend using these as examples and then replacing them with your own applications under test."),(0,l.kt)("h2",{id:"feedback"},"Feedback"),(0,l.kt)("p",null,"Your feedback and contributions will help us to improve. See the ",(0,l.kt)("a",{parentName:"p",href:"/docs/contributions"},"Stacks guide to new contributions")," for more information."),(0,l.kt)(s.Z,{prev:!0,mdxType:"HideNavigation"}))}v.isMDXComponent=!0}}]);