"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[2707],{9168:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=n(4848),i=n(8453);const r={},a=void 0,o={id:"getting_started/playwright/init-deployment",title:"init-deployment",description:"@ensono-stacks/playwright:init-deployment",source:"@site/docs/getting_started/playwright/init-deployment.md",sourceDirName:"getting_started/playwright",slug:"/getting_started/playwright/init-deployment",permalink:"/docs/getting_started/playwright/init-deployment",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},l={},d=[{value:"@ensono-stacks/playwright",id:"ensono-stacksplaywright",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Usage",id:"usage",level:2},{value:"Generator Output",id:"generator-output",level:3}];function c(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.h3,{id:"ensono-stacksplaywright",children:["@ensono-stacks/playwright",":init-deployment"]}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Add Playwright E2E tests to your deployment pipelines"}),(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"init-deployment"})," generator adds e2e testing to preexisting deployment pipelines, including test reporting and artefact uploads."]}),(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsxs)(t.a,{href:"/docs/getting_started/workspace/ensono-stacks-workspace#ensono-stacksworkspaceinit-deployment",children:["@ensono-stacks/workspace",":init-deployment"]})," has been executed, producing the required deployment files for the workspace"]}),"\n"]}),(0,s.jsx)(t.h2,{id:"usage",children:"Usage"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"nx g @ensono-stacks/playwright:init-deployment\n"})}),(0,s.jsx)(t.h3,{id:"generator-output",children:"Generator Output"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:"title=build/taskctl/tasks.yaml",children:'# New e2e:ci task definition will be added to the tasks.yaml, defining what target should be ran for projects when executing the e2e task\r\ne2e:ci:\r\n    description: Run e2e tests in ci\r\n    command:\r\n      - npx nx affected --base="$BASE_SHA" --target=e2e --parallel=1\n'})}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:"title=taskctl.yaml",children:"# New e2e:ci task will be added to the taskctl pipeline, adding e2e tests following unit testing\r\n- task: e2e:ci\r\n    depends_on: test:ci\r\n- task: version:prod\r\n    depends_on: e2e:ci\n"})}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:"build/azDevOps/azuredevops-stages.yaml",children:"# New test reporting steps will be added to the azuredevops pipeline\r\n- script: |-\r\n    # Install playwright added to setup step \r\n    npx playwright install --with-deps\r\n- task: PublishTestResults@2\r\n    # Configuration for publishing test results\r\n- task: PublishPipelineArtifact@1\r\n    # Configuration for publishing pipeline artefacts\n"})})]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);