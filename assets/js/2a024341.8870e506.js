"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[9876],{246:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"workloads/azure/data/getting_started/example_data_source","title":"Example Data Source","description":"Setting up and using the example data source","source":"@site/docs/workloads/azure/data/getting_started/example_data_source.md","sourceDirName":"workloads/azure/data/getting_started","slug":"/workloads/azure/data/getting_started/example_data_source","permalink":"/docs/workloads/azure/data/getting_started/example_data_source","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"example_data_source","title":"Example Data Source","sidebar_label":"5. Example Data Source","hide_title":false,"hide_table_of_contents":false,"description":"Setting up and using the example data source","keywords":["data","sql","azure","testing"]},"sidebar":"docs","previous":{"title":"4. Shared Resources Deployment","permalink":"/docs/workloads/azure/data/getting_started/shared_resources_deployment_azure"},"next":{"title":"6. Data Ingest Pipeline Deployment","permalink":"/docs/workloads/azure/data/getting_started/ingest_pipeline_deployment_azure"}}');var s=a(4848),r=a(8453);const i={id:"example_data_source",title:"Example Data Source",sidebar_label:"5. Example Data Source",hide_title:!1,hide_table_of_contents:!1,description:"Setting up and using the example data source",keywords:["data","sql","azure","testing"]},o=void 0,d={},l=[{value:"Example dataset",id:"example-dataset",level:2},{value:"Movies dataset tables DDL",id:"movies-dataset-tables-ddl",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"When deploying an Ensono Stacks Data Platform, an Azure SQL database will be deployed. This database is intended to be used for experimenting and testing ingest processes within the platform. The database will be deployed into the same resource groups as the core data platform resources, named for example:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"SQL server name:"})," amidostacksdeveuwdesql.database.windows.net"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"SQL database name:"})," sqldbtest"]}),"\n"]}),"\n",(0,s.jsxs)(t.admonition,{title:"Accessing the Azure SQL database",type:"note",children:[(0,s.jsxs)(t.p,{children:["When the sample Azure SQL database is deployed, by default it will create an admin user (",(0,s.jsx)(t.code,{children:"mssqladmin"}),"). A password for this user will be randomly generated and added to key vault secrets under ",(0,s.jsx)(t.code,{children:"sql-password"}),"."]}),(0,s.jsxs)(t.p,{children:["By default the SQL server and database will not be accessible outside of the virtual network into which the data platform has been deployed. If you wish to access the SQL server from another network (for example when testing in a non-sensitive environment) you may do this by adding a firewall rule - see ",(0,s.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/azure-sql/database/firewall-configure?view=azuresql#create-and-manage-ip-firewall-rules",children:"Azure SQL firewall documentation"}),"."]}),(0,s.jsx)(t.p,{children:"If using the database for anything more than local testing, it is recommended that you configure the database with additional users with more restrictive access."})]}),"\n",(0,s.jsx)(t.h2,{id:"example-dataset",children:"Example dataset"}),"\n",(0,s.jsx)(t.p,{children:"The database can be populated with any dataset you wish for developing and testing Ensono Stacks."}),"\n",(0,s.jsxs)(t.p,{children:["The examples contained in the Getting Started documentation are based around populating the sample database with data\nfrom ",(0,s.jsx)(t.a,{href:"https://www.kaggle.com/datasets/rounakbanik/the-movies-dataset",children:"The Movies Dataset from Kaggle"}),", which contains metadata and ratings for approximately 45,000 movies released\non or before July 2017. These CSV files were loaded into the following tables in the example database:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.credits"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.keywords"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.links"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.links_small"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.movies_metadata"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.ratings"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"movies.ratings_small"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Refer to official Microsoft documentation for steps on loading data from CSV into an Azure SQL database. The DDL for the tables created is provided below. Please note, the database schema design has not been fully optimised for the dataset - this is intentional, to give further opportunity for testing data transformation and quality checks in the platform."}),"\n",(0,s.jsx)(t.h3,{id:"movies-dataset-tables-ddl",children:"Movies dataset tables DDL"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"CREATE TABLE [movies].[credits](\n\t[cast] [nvarchar](max) NOT NULL,\n\t[crew] [nvarchar](max) NOT NULL,\n\t[id] [int] NOT NULL\n)\nGO\nCREATE TABLE [movies].[keywords](\n\t[id] [int] NOT NULL,\n\t[keywords] [nvarchar](max) NOT NULL\n)\nGO\nCREATE TABLE [movies].[links](\n\t[movieId] [int] NOT NULL,\n\t[imdbId] [int] NOT NULL,\n\t[tmdbId] [int] NULL\n)\nGO\nCREATE TABLE [movies].[links_small](\n\t[movieId] [int] NOT NULL,\n\t[imdbId] [int] NOT NULL,\n\t[tmdbId] [int] NULL\n)\nGO\nCREATE TABLE [movies].[movies_metadata](\n\t[adult] [nvarchar](1000) NOT NULL,\n\t[belongs_to_collection] [nvarchar](1000) NULL,\n\t[budget] [nvarchar](1000) NOT NULL,\n\t[genres] [nvarchar](1000) NULL,\n\t[homepage] [nvarchar](1000) NULL,\n\t[id] [nvarchar](1000) NOT NULL,\n\t[imdb_id] [nvarchar](1000) NULL,\n\t[original_language] [nvarchar](1000) NULL,\n\t[original_title] [nvarchar](1000) NULL,\n\t[overview] [nvarchar](1000) NULL,\n\t[popularity] [nvarchar](1000) NULL,\n\t[poster_path] [nvarchar](1000) NULL,\n\t[production_companies] [nvarchar](max) NULL,\n\t[production_countries] [nvarchar](max) NULL,\n\t[release_date] [nvarchar](1000) NULL,\n\t[revenue] [bigint] NULL,\n\t[runtime] [nvarchar](1000) NULL,\n\t[spoken_languages] [nvarchar](1000) NULL,\n\t[status] [nvarchar](1000) NULL,\n\t[tagline] [nvarchar](1000) NULL,\n\t[title] [nvarchar](1000) NULL,\n\t[video] [nvarchar](1000) NULL,\n\t[vote_average] [nvarchar](1000) NULL,\n\t[vote_count] [smallint] NULL\n)\nGO\nCREATE TABLE [movies].[ratings](\n\t[userId] [int] NOT NULL,\n\t[movieId] [int] NOT NULL,\n\t[rating] [nvarchar](50) NOT NULL,\n\t[timestamp] [int] NOT NULL\n)\nGO\nCREATE TABLE [movies].[ratings_small](\n\t[userId] [int] NOT NULL,\n\t[movieId] [int] NOT NULL,\n\t[rating] [nvarchar](50) NOT NULL,\n\t[timestamp] [int] NOT NULL\n)\nGO\n"})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>i,x:()=>o});var n=a(6540);const s={},r=n.createContext(s);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);