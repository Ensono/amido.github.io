"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[344],{9270:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var s=t(4848),a=t(8453),r=t(1470),l=t(9365);const i={id:"testcafe_functional_testing",title:"Functional Testing with TestCafe",sidebar_label:"TestCafe - Functional Testing",description:"How to create functional tests with TestCafe",keywords:["TestCafe","tests","testing","functional","template","example","run TestCafe tests","TestCafe report"]},o=void 0,c={id:"testing/testcafe_functional_testing",title:"Functional Testing with TestCafe",description:"How to create functional tests with TestCafe",source:"@site/docs/testing/testcafe_functional_testing.md",sourceDirName:"testing",slug:"/testing/testcafe_functional_testing",permalink:"/docs/testing/testcafe_functional_testing",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"testcafe_functional_testing",title:"Functional Testing with TestCafe",sidebar_label:"TestCafe - Functional Testing",description:"How to create functional tests with TestCafe",keywords:["TestCafe","tests","testing","functional","template","example","run TestCafe tests","TestCafe report"]},sidebar:"docs",previous:{title:"Cypress - Functional Testing",permalink:"/docs/testing/cypress_functional_testing"},next:{title:"Static Code Analysis",permalink:"/docs/testing/testing_static_analysis"}},u={},d=[{value:"TestCafe: Functional tests",id:"testcafe-functional-tests",level:2},{value:"Running tests locally",id:"running-tests-locally",level:3},{value:"Prerequisites",id:"prerequisites",level:4},{value:"Example",id:"example",level:4},{value:"Run Tests",id:"run-tests",level:3},{value:"Running tests in Docker",id:"running-tests-in-docker",level:2},{value:"Build",id:"build",level:3},{value:"Run",id:"run",level:3},{value:"Optional: Running tests with Lambdatest",id:"optional-running-tests-with-lambdatest",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"Settings",id:"settings",level:3},{value:"Running E2E tests with LambdaTest",id:"running-e2e-tests-with-lambdatest",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"TestCafe is no longer supported by stacks. However this is still part of the scaffolding cli for testing and may be removed at a later date"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://devexpress.github.io/testcafe/",children:"TestCafe"})," is a Node.js end-to-end open source automation tool that is used to test web applications. It can run your tests on any browser without having to download separate drivers for each browser.\nIt is easy to install, configure and get started without any external libraries or plugins required."]}),"\n",(0,s.jsx)(n.h2,{id:"testcafe-functional-tests",children:"TestCafe: Functional tests"}),"\n",(0,s.jsxs)(n.p,{children:["Templated sample TestCafe automation framework for PROJECT_NAME, bootstrapped using ",(0,s.jsx)(n.code,{children:"@amidostacks/scaffolding-cli"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"running-tests-locally",children:"Running tests locally"}),"\n",(0,s.jsx)(n.h4,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Ensure that ",(0,s.jsx)(n.a,{href:"https://nodejs.org/",children:"Node.js"})," and ",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/",children:"npm"})," are installed with the versions specified in ",(0,s.jsx)(n.code,{children:"./package.json"})," file."]}),"\n",(0,s.jsx)(n.li,{children:"Execute the following command to install all dependencies:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Configure your browser:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ensure you have at least one browser installed on your operating system e.g. Chrome."}),"\n",(0,s.jsxs)(n.li,{children:["Include the browser name  in  the ",(0,s.jsx)(n.code,{children:"./.testcaferc.json"})," file. e.g.:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:'  "browsers": [\n    "chrome:headless",\n    "firefox:headless"\n  ]\n'})}),"\n",(0,s.jsx)(n.p,{children:"At the moment, Chrome is set as the default web browser."}),"\n",(0,s.jsxs)(n.p,{children:["To bypass the browser config in the ",(0,s.jsx)(n.code,{children:"./.testcaferc.json"})," config file, simply run passing in the browser arg:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm run test:e2e --chrome\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://devexpress.github.io/testcafe/documentation/using-testcafe/common-concepts/browsers/",children:"browsers"})," for more information."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configure Environment Variables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"TestCafe functional tests are configured to run after successful deployment, so environment variables need to be set."}),"\n",(0,s.jsx)(n.p,{children:"Export the following environment variables."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"NODE_ENV,"}),"\n",(0,s.jsx)(n.li,{children:"APP_BASE_URL: base url to the environment where the web app is deployed,"}),"\n",(0,s.jsx)(n.li,{children:"APP_BASE_PATH: path to main page,"}),"\n",(0,s.jsx)(n.li,{children:"MENU_API_URL: base url to rest api."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(r.A,{groupId:"operating-systems",defaultValue:"unix",values:[{label:"Unix",value:"unix"},{label:"Windows",value:"windows"}],children:[(0,s.jsx)(l.A,{value:"unix",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export APP_BASE_PATH=/web/stacks\n"})})}),(0,s.jsx)(l.A,{value:"windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"set APP_BASE_PATH=/web/stacks\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["or use the ",(0,s.jsx)(n.code,{children:"./.env"})," file to specify the default values instead of exporting them locally."]}),"\n",(0,s.jsx)(n.h3,{id:"run-tests",children:"Run Tests"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm run test:e2e\n"})}),"\n",(0,s.jsx)(n.p,{children:"Run tests in a specific browser:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm run test:e2e --chrome\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This should launch TestCafe and run the tests in the browsers specified in ",(0,s.jsx)(n.code,{children:"./.testcaferc.json"})," in the headless mode."]}),"\n",(0,s.jsx)(n.h2,{id:"running-tests-in-docker",children:"Running tests in Docker"}),"\n",(0,s.jsx)(n.p,{children:"In order to be able to run these tests across environments and as part of CI, we need to use Docker to run them."}),"\n",(0,s.jsx)(n.h3,{id:"build",children:"Build"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,s.jsx)(n.h3,{id:"run",children:"Run"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker pull testcafe/testcafe:latest\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -e APP_BASE_URL=$APP_BASE_URL -e APP_BASE_PATH=$APP_BASE_PATH -e MENU_API_URL=$MENU_API_URL -e NODE_ENV=$NODE_ENV -it -v $(pwd):/tests testcafe/testcafe chromium /**/*.test.cf.ts   \n"})}),"\n",(0,s.jsx)(n.h2,{id:"optional-running-tests-with-lambdatest",children:"Optional: Running tests with Lambdatest"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.lambdatest.com",children:"Lambdatest"})," is a cloud-based cross browser testing tool that allows to check the web application functionality and other dependencies across various browsers over the internet."]}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(n.p,{children:["An active ",(0,s.jsx)(n.a,{href:"https://accounts.lambdatest.com/dashboard",children:"Lambdatest"})," Account"]}),"\n",(0,s.jsx)(n.h3,{id:"settings",children:"Settings"}),"\n",(0,s.jsxs)(n.p,{children:["Export ",(0,s.jsx)(n.a,{href:"https://www.lambdatest.com/support/docs/npm-plugin-for-testcafe-integration-with-lambdatest/",children:"Lambdatest Credentials"})," as following:"]}),"\n",(0,s.jsxs)(r.A,{groupId:"operating-systems",defaultValue:"unix",values:[{label:"Unix",value:"unix"},{label:"Windows",value:"windows"}],children:[(0,s.jsx)(l.A,{value:"unix",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export LT_USERNAME= {your lambdatest username}\nexport LT_ACCESS_KEY= {your lambdatest access_key}\n"})})}),(0,s.jsx)(l.A,{value:"windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"set LT_USERNAME= {your lambdatest username}\nset LT_ACCESS_KEY= {your lambdatest access_key}\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"running-e2e-tests-with-lambdatest",children:"Running E2E tests with LambdaTest"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'npm run test:e2e -- "lambdatest:IE@11.0:Windows 10"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Lambdatest will create a tunnel to run the tests and automatically record videos."}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.p,{children:"The full list of browser configuration available can be found by running the following in the root:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"node_modules/.bin/testcafe -b lambdatest\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>l});t(6540);var s=t(4164);const a={tabItem:"tabItem_Ymn6"};var r=t(4848);function l(e){let{children:n,hidden:t,className:l}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(a.tabItem,l),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>y});var s=t(6540),a=t(4164),r=t(3104),l=t(6347),i=t(205),o=t(7485),c=t(1682),u=t(679);function d(e){var n,t;return null!=(n=null==(t=s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function h(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=null!=n?n:function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:a}}=e;return{value:n,label:t,attributes:s,default:a}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:t});return[(0,o.aZ)(r),(0,s.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=h(e),[l,o]=(0,s.useState)((()=>function(e){var n;let{defaultValue:t,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:s}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+s.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}const a=null!=(n=s.find((e=>e.default)))?n:s[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[c,d]=f({queryString:t,groupId:a}),[m,b]=function(e){let{groupId:n}=e;const t=function(e){return e?"docusaurus.tab."+e:null}(n),[a,r]=(0,u.Dv)(t);return[a,(0,s.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),g=(()=>{const e=null!=c?c:m;return p({value:e,tabValues:r})?e:null})();(0,i.A)((()=>{g&&o(g)}),[g]);return{selectedValue:l,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error("Can't select invalid tab value="+e);o(e),d(e),b(e)}),[d,b,r]),tabValues:r}}var b=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(4848);function j(e){let{className:n,block:t,selectedValue:s,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),u=e=>{const n=e.currentTarget,t=o.indexOf(n),a=i[t].value;a!==s&&(c(n),l(a))},d=e=>{var n;let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{var s;const n=o.indexOf(e.currentTarget)+1;t=null!=(s=o[n])?s:o[0];break}case"ArrowLeft":{var a;const n=o.indexOf(e.currentTarget)-1;t=null!=(a=o[n])?a:o[o.length-1];break}}null==(n=t)||n.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>o.push(e),onKeyDown:d,onClick:u,...r,className:(0,a.A)("tabs__item",g.tabItem,null==r?void 0:r.className,{"tabs__item--active":s===n}),children:null!=t?t:n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:r}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function w(e){const n=m(e);return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,x.jsx)(j,{...n,...e}),(0,x.jsx)(v,{...n,...e})]})}function y(e){const n=(0,b.A)();return(0,x.jsx)(w,{...e,children:d(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>i});var s=t(6540);const a={},r=s.createContext(a);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);