"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[3596],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return y}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=a.createContext({}),o=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=o(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=o(n),g=i,y=p["".concat(c,".").concat(g)]||p[g]||d[g]||r;return n?a.createElement(y,s(s({ref:t},u),{},{components:n})):a.createElement(y,s({ref:t},u))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,s=new Array(r);s[0]=g;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:i,s[1]=l;for(var o=2;o<r;o++)s[o]=n[o];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(7294),i=n(6010),r={tabItem:"tabItem_Ymn6"};function s(e){var t=e.children,n=e.hidden,s=e.className;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r.tabItem,s),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return k}});var a=n(7462),i=n(7294),r=n(6010),s=n(2466),l=n(6550),c=n(1980),o=n(7392),u=n(12);function p(e){return function(e){var t,n;return null!=(t=null==(n=i.Children.map(e,(function(e){if(!e||(0,i.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function d(e){var t=e.values,n=e.children;return(0,i.useMemo)((function(){var e=null!=t?t:p(n);return function(e){var t=(0,o.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function g(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function y(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,r=(0,l.k6)(),s=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,c._X)(s),(0,i.useCallback)((function(e){if(s){var t=new URLSearchParams(r.location.search);t.set(s,e),r.replace(Object.assign({},r.location,{search:t.toString()}))}}),[s,r])]}function m(e){var t,n,a,r,s=e.defaultValue,l=e.queryString,c=void 0!==l&&l,o=e.groupId,p=d(e),m=(0,i.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var i=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:s,tabValues:p})})),f=m[0],h=m[1],b=y({queryString:c,groupId:o}),v=b[0],w=b[1],k=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:o}.groupId),n=(0,u.Nk)(t),a=n[0],r=n[1],[a,(0,i.useCallback)((function(e){t&&r.set(e)}),[t,r])]),x=k[0],_=k[1],N=function(){var e=null!=v?v:x;return g({value:e,tabValues:p})?e:null}();return(0,i.useLayoutEffect)((function(){N&&h(N)}),[N]),{selectedValue:f,selectValue:(0,i.useCallback)((function(e){if(!g({value:e,tabValues:p}))throw new Error("Can't select invalid tab value="+e);h(e),w(e),_(e)}),[w,_,p]),tabValues:p}}var f=n(2389),h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){var t=e.className,n=e.block,l=e.selectedValue,c=e.selectValue,o=e.tabValues,u=[],p=(0,s.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=u.indexOf(t),a=o[n].value;a!==l&&(p(t),c(a))},g=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,i=u.indexOf(e.currentTarget)+1;n=null!=(a=u[i])?a:u[0];break;case"ArrowLeft":var r,s=u.indexOf(e.currentTarget)-1;n=null!=(r=u[s])?r:u[u.length-1]}null==(t=n)||t.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},o.map((function(e){var t=e.value,n=e.label,s=e.attributes;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:function(e){return u.push(e)},onKeyDown:g,onClick:d},s,{className:(0,r.Z)("tabs__item",h.tabItem,null==s?void 0:s.className,{"tabs__item--active":l===t})}),null!=n?n:t)})))}function v(e){var t=e.lazy,n=e.children,a=e.selectedValue,r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var s=r.find((function(e){return e.props.value===a}));return s?(0,i.cloneElement)(s,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},r.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function w(e){var t=m(e);return i.createElement("div",{className:(0,r.Z)("tabs-container",h.tabList)},i.createElement(b,(0,a.Z)({},e,t)),i.createElement(v,(0,a.Z)({},e,t)))}function k(e){var t=(0,f.Z)();return i.createElement(w,(0,a.Z)({key:String(t)},e))}},6355:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return u},default:function(){return f},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return g}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),s=n(4866),l=n(5162),c=["components"],o={id:"cypress_accessibility_testing",title:"Accessibility Testing with Cypress",sidebar_label:"Accessibility Testing",description:"Accessibility Testing with Cypress using Axe!",keywords:["NX","axe","tests","testing","cypress","accessibility testing"]},u=void 0,p={unversionedId:"testing/testing_in_nx/cypress_accessibility_testing",id:"testing/testing_in_nx/cypress_accessibility_testing",title:"Accessibility Testing with Cypress",description:"Accessibility Testing with Cypress using Axe!",source:"@site/docs/testing/testing_in_nx/cypress_accessibility_testing.md",sourceDirName:"testing/testing_in_nx",slug:"/testing/testing_in_nx/cypress_accessibility_testing",permalink:"/docs/testing/testing_in_nx/cypress_accessibility_testing",draft:!1,tags:[],version:"current",frontMatter:{id:"cypress_accessibility_testing",title:"Accessibility Testing with Cypress",sidebar_label:"Accessibility Testing",description:"Accessibility Testing with Cypress using Axe!",keywords:["NX","axe","tests","testing","cypress","accessibility testing"]},sidebar:"docs",previous:{title:"Testing with cypress",permalink:"/docs/testing/testing_in_nx/testing_with_cypress"},next:{title:"Java - Serenity BDD",permalink:"/docs/testing/testing_java_serenity_bdd"}},d={},g=[{value:"Axe: Accessibility testing",id:"axe-accessibility-testing",level:2},{value:"Scaffolded Example",id:"scaffolded-example",level:3},{value:"Running your accessibility tests",id:"running-your-accessibility-tests",level:3},{value:"Viewing your test results",id:"viewing-your-test-results",level:2}],y={toc:g},m="wrapper";function f(e){var t=e.components,n=(0,i.Z)(e,c);return(0,r.kt)(m,(0,a.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Accessibility testing with Cypress is very simple and ensures that everyone, including those with disabilities or impairments can fully access and use the site or app. It is not only a legal requirement, but also a moral and ethical one, to ensure that digital products are inclusive and usable by all."),(0,r.kt)("h2",{id:"axe-accessibility-testing"},"Axe: Accessibility testing"),(0,r.kt)("p",null,"From the Dequeue family of products, we are using ",(0,r.kt)("a",{parentName:"p",href:"https://www.deque.com/axe/"},"aXe")," for accessibility testing. Using their Node.js plugin, ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/axe-core"},(0,r.kt)("inlineCode",{parentName:"a"},"axe-core")),", we also utilise ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/cypress-axe"},(0,r.kt)("inlineCode",{parentName:"a"},"cypress-axe"))," for integration into the Cypress testing framework."),(0,r.kt)("h3",{id:"scaffolded-example"},"Scaffolded Example"),(0,r.kt)("p",null,"When accessibility tests are scaffolded into your project you will see the following example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="axe-accessibility.cy.ts"',title:'"axe-accessibility.cy.ts"'},"import 'cypress-axe';\nimport { terminalLogAxe } from '../support/e2e';\n\ndescribe('@accessibility-tests', () => {\n  beforeEach(() => {\n    cy.visit('/');\n    cy.injectAxe();\n  });\n\n  it('Has no detectable a11y violations on load (with custom parameters)', () => {\n    // Test the page at initial load (with context and options)\n    cy.checkA11y(\n      null,\n      {\n        runOnly: {\n          type: 'tag',\n          values: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'],\n        },\n      },\n      terminalLogAxe\n    );\n  });\n\n  it('Has no detectable a11y violations on load (filtering to only include critical impact violations)', () => {\n    // Test on initial load, only report and assert for critical impact items\n    cy.checkA11y(\n      null,\n      {\n        includedImpacts: ['critical'],\n      },\n      terminalLogAxe\n    );\n  });\n\n  // Basic usage after interacting with the page\n  it('Has no a11y violations after button click', () => {\n    // Interact with the page, then check for a11y issues\n    cy.contains('a', \"What's next?\").click();\n    cy.checkA11y(null, undefined, terminalLogAxe);\n  });\n\n  it('Only logs a11y violations while allowing the test to pass', () => {\n    // Do not fail the test when there are accessibility failures\n    cy.checkA11y(null, undefined, terminalLogAxe, true);\n  });\n\n  it('Has no a11y violations after asynchronous load', () => {\n    // Retry the check if there are initial failures\n    cy.checkA11y(\n      null,\n      {\n        retries: 3,\n        interval: 100,\n      },\n      terminalLogAxe\n    );\n  });\n});\n\n")),(0,r.kt)("p",null,"Using ",(0,r.kt)("inlineCode",{parentName:"p"},"cypress-axe")," we first inject ",(0,r.kt)("inlineCode",{parentName:"p"},"axe-core")," into the webpage within our ",(0,r.kt)("em",{parentName:"p"},"beforeEach")," hook, this ensures that each test in the spec file has been set up to run tests using the axe testing engine."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"beforeEach(() => {\n  cy.visit('/');\n  // highlight-next-line\n  cy.injectAxe();\n});\n")),(0,r.kt)("p",null,"Using the ",(0,r.kt)("inlineCode",{parentName:"p"},"cy.checkA11y()")," function (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/component-driven/cypress-axe/blob/master/README.md"},"see docs for usage"),") we then test the webpage against various accessibility rules."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"it('Has no detectable a11y violations on load (with custom parameters)', () => {\n    // Test the page at initial load (with context and options)\n    cy.checkA11y(\n      null,\n      {\n        // highlight-start\n        runOnly: {\n          type: 'tag',\n          values: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'],\n        },\n        // highlight-end\n      },\n      terminalLogAxe\n    );\n    \n});\n")),(0,r.kt)("p",null,"Passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"terminalLogAxe")," function as a callback to ",(0,r.kt)("inlineCode",{parentName:"p"},"cy.checkA11y()")," then creates and prints a readable table of accessibility violations to the console. (The ",(0,r.kt)("inlineCode",{parentName:"p"},"terminalLogAxe")," function has been added to your ",(0,r.kt)("em",{parentName:"p"},"app-name/cypress/support/e2e.ts")," file)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"it('Has no detectable a11y violations on load (with custom parameters)', () => {\n    // Test the page at initial load (with context and options)\n    cy.checkA11y(\n      null,\n      {\n        runOnly: {\n          type: 'tag',\n          values: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'],\n        },\n      },\n      // highlight-next-line\n      terminalLogAxe\n    );\n});\n")),(0,r.kt)("h3",{id:"running-your-accessibility-tests"},"Running your accessibility tests"),(0,r.kt)("p",null,"We recommend tagging your Cypress accessibility tests so that you can target these specific tests if required. In the below examples we have tagged the tests with ",(0,r.kt)("strong",{parentName:"p"},"@accessibility")," which enables us to target them through ",(0,r.kt)("strong",{parentName:"p"},"grep")," as seen in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/testing/testing_in_nx/testing_with_cypress#run-specific-tests"},"'Run specific tests'")," example"),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"grouped",label:"Grouped",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"//multiple tests grouped in a describe block\ndescribe('Example test group @accessibility', () => {\n           \n   it('accessibility test 1', async ({ page }) => {\n       //test code\n   });\n\n   it('accessibility test 2', async ({ page }) => {\n       //test code\n   });\n}\n"))),(0,r.kt)(l.Z,{value:"individual",label:"Individual",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"it('Example individual test @accessibility', () => {\n   //Accessibility test with axe\n});\n")))),(0,r.kt)("h2",{id:"viewing-your-test-results"},"Viewing your test results"),(0,r.kt)("p",null,"Further to the explanation given in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/testing/testing_in_nx/testing_with_cypress#running-your-cypress-tests"},"'Testing with Cypress'")," page, accessibility test results can also be found in the console output post execution."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="Sample AXE report"',title:'"Sample',AXE:!0,'report"':!0},"1) Has no detectable a11y violations on load (with custom parameters)\n3 accessibility violations were detected\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 (index) \u2502        id        \u2502  impact   \u2502                                                    description                                                    \u2502 nodes \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    0    \u2502 'color-contrast' \u2502 'serious' \u2502 'Ensures the contrast between foreground and background colors meets WCAG 2 AA minimum contrast ratio thresholds' \u2502   1   \u2502\n\u2502    1    \u2502 'html-has-lang'  \u2502 'serious' \u2502                                'Ensures every HTML document has a lang attribute'                                 \u2502   1   \u2502\n\u2502    2    \u2502  'svg-img-alt'   \u2502 'serious' \u2502      'Ensures <svg> elements with an img, graphics-document or graphics-symbol role have an accessible text'      \u2502   3   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")))}f.isMDXComponent=!0}}]);