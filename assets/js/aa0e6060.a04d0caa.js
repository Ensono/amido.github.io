"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[1824],{6036:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var n=r(4848),s=r(8453),i=(r(9557),r(6025));const a={id:"core_infrastructure_aws",title:"AWS Core Infrastructure",sidebar_label:"Core Infrastructure",description:"How to bootstrap the Azure tenant",keywords:["github actions","workload","pipeline","pipeline template","resources"]},o=void 0,c={id:"infrastructure/aws/core_infrastructure_aws",title:"AWS Core Infrastructure",description:"How to bootstrap the Azure tenant",source:"@site/docs/infrastructure/aws/core_infrastructure.md",sourceDirName:"infrastructure/aws",slug:"/infrastructure/aws/core_infrastructure_aws",permalink:"/docs/infrastructure/aws/core_infrastructure_aws",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"core_infrastructure_aws",title:"AWS Core Infrastructure",sidebar_label:"Core Infrastructure",description:"How to bootstrap the Azure tenant",keywords:["github actions","workload","pipeline","pipeline template","resources"]},sidebar:"docs",previous:{title:"Getting started with Azure Container Apps",permalink:"/docs/getting_started/azure-container-app/azure-container-apps"},next:{title:"GitHub Actions",permalink:"/docs/infrastructure/aws/pipelines/github_actions"}},l={},d=[{value:"Resources Provisioned",id:"resources-provisioned",level:2},{value:"Diagram",id:"diagram",level:3},{value:"Resource List",id:"resource-list",level:3},{value:"Deploying",id:"deploying",level:2},{value:"Bootstrap the AWS tenant",id:"bootstrap-the-aws-tenant",level:3},{value:"Pipelines",id:"pipelines",level:3}];function u(e){const t={a:"a",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"The core infrastructure is the foundation for all other Ensono Stacks Workloads. As, in most cases, this will be the first part of Ensono Stacks that you deploy we will also cover bootstrapping your AWS tenant."}),"\n",(0,n.jsx)(t.h2,{id:"resources-provisioned",children:"Resources Provisioned"}),"\n",(0,n.jsx)(t.p,{children:"Both the diagram and resource list below are for a single environment. By default, the pipeline template will create two environments (nonprod and prod)."}),"\n",(0,n.jsx)(t.h3,{id:"diagram",children:"Diagram"}),"\n",(0,n.jsx)("img",{alt:"AWS Core Infrastructure",src:(0,i.Ay)("img/aws_core_infrastructure.png")}),"\n",(0,n.jsx)(t.h3,{id:"resource-list",children:"Resource List"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Resource"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Virtual Private Cloud"}),(0,n.jsx)(t.td,{children:"Fundamental building block for the network"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Public Subnet"}),(0,n.jsx)(t.td,{children:"Dedicated subnet required for Network Load Balancer"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Load Balancer"}),(0,n.jsx)(t.td,{children:"Web traffic load balancer"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Private Subnet"}),(0,n.jsx)(t.td,{children:"Subnet used by the EKS cluster"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"EKS"}),(0,n.jsx)(t.td,{children:"Amazon Elastic Kubernetes Service"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Route 53"}),(0,n.jsx)(t.td,{children:"Hosted service for DNS domain"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"IAM"}),(0,n.jsx)(t.td,{children:"Identity and access management"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"KMS"}),(0,n.jsx)(t.td,{children:"Cryptographic keys and secrets management service"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"deploying",children:"Deploying"}),"\n",(0,n.jsx)(t.h3,{id:"bootstrap-the-aws-tenant",children:"Bootstrap the AWS tenant"}),"\n",(0,n.jsx)(t.p,{children:"This process only needs to be run once on an administrators workstation."}),"\n",(0,n.jsx)(t.p,{children:"The administrator will need the permissions that allow them to:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Create an IAM User for use with Terraform. This will require permissions to read and create all the core resources.","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Make note of the Access Key ID and Secret Access Key"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["Create an ",(0,n.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html",children:"S3 Bucket"})," for storing Terraform state.","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Take note of the S3 bucket name."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["Create a ",(0,n.jsx)(t.a,{href:"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/getting-started-step-1.html",children:"DynamoDB"})," table for locking Terraform state."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"pipelines",children:"Pipelines"}),"\n",(0,n.jsx)(t.p,{children:"The following pipelines are currently supported for automating the deployment:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/infrastructure/aws/pipelines/github_actions",children:"GitHub Actions"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},9557:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6540),s=r(4848);const i=e=>{let{next:t,prev:r}=e;return n.useEffect((()=>{if(t){const e=document.querySelector("div.pagination-nav__item.pagination-nav__item--next>a");e&&e.style&&(e.style.display="none")}if(r){const e=document.querySelector("div.pagination-nav__item>a");e&&e.style&&(e.style.display="none")}})),(0,s.jsx)("div",{})}},8453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>o});var n=r(6540);const s={},i=n.createContext(s);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);