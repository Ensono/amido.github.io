"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[4777],{2256:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=s(4848),t=s(8453);const o={},a="Using the CLI",c={id:"stackscli/usage",title:"Using the CLI",description:"The Ensono Stacks CLI is built using Go, which means that it is a single binary which can be downloaded and run without the need to run an installer. It is currently built for the following platforms",source:"@site/docs/stackscli/usage.mdx",sourceDirName:"stackscli",slug:"/stackscli/usage",permalink:"/docs/stackscli/usage",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},h={},l=[{value:"Installation",id:"installation",level:2},{value:"Commands",id:"commands",level:2},{value:"Completion",id:"completion",level:3},{value:"Interactive Command",id:"interactive-command",level:3},{value:"Scaffold",id:"scaffold",level:3},{value:"Validation",id:"validation",level:2},{value:"Command Availability Checks",id:"command-availability-checks",level:2},{value:"Logging",id:"logging",level:2},{value:"Connectivity Check",id:"connectivity-check",level:2},{value:"CLI Version Check",id:"cli-version-check",level:2}];function r(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"using-the-cli",children:"Using the CLI"})}),"\n",(0,i.jsx)(n.p,{children:"The Ensono Stacks CLI is built using Go, which means that it is a single binary which can be downloaded and run without the need to run an installer. It is currently built for the following platforms"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"windows",src:s(8581).A+"",width:"30",height:"30"})," Windows"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"apple",src:s(9326).A+"",width:"30",height:"30"})," Mac OS"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"linux",src:s(8476).A+"",width:"26",height:"26"})," Linux"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The CLI will download the specified projects and run a series of operations to customise them according to the user\u2019s requirements. The steps that are to be performed in each project is governed by a project settings file, which by default is called ",(0,i.jsx)(n.code,{children:"stackscli.yml"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["Visit the ",(0,i.jsx)(n.a,{href:"https://github.com/Ensono/stacks-cli/releases",children:"Ensono Stacks CLI"})," release page and download the latest version for your machine"]}),"\n",(0,i.jsx)(n.p,{children:"Once this has been downloaded, the quickest way to get started is to place the binary somewhere on your system PATH"}),"\n",(0,i.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,i.jsxs)(n.p,{children:["The CLI has a number of commands and various options. The easiest way to see what is available it to run the ",(0,i.jsx)(n.code,{children:"stacks-cli"})," command, which will display the help page."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Note"})}),"\n",(0,i.jsx)(n.p,{children:"The operation of the Ensono Stacks CLI is identical on every platform"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Ensono Stacks CLI Help",src:s(8010).A+"",width:"1494",height:"804"})}),"\n",(0,i.jsx)(n.h3,{id:"completion",children:"Completion"}),"\n",(0,i.jsx)(n.p,{children:"The completion command adds completion scripts to any of the following shells:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"bash"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"fish"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"powershell"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"zsh"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By adding the completion to the shell, it allows the [TAB] key to be used to cycle through the options of any command, making discovery of options easier and increase efficiency."}),"\n",(0,i.jsx)(n.p,{children:"The following command shows the help for configuring auto-completion for PowerShell."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"stacks-cli completion powershell -h\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Help page for completion command",src:s(231).A+"",width:"1494",height:"906"})}),"\n",(0,i.jsx)(n.p,{children:"As can be seen from the output, the command required to load the completion script into the current shell is displayed."}),"\n",(0,i.jsx)(n.h3,{id:"interactive-command",children:"Interactive Command"}),"\n",(0,i.jsxs)(n.p,{children:["The interactive command will ask several questions about the required projects, what platform it is being run on and cloud configuration. It will then save the output of these details to a configuration file that can then be read in by the ",(0,i.jsx)(n.code,{children:"scaffold"})," command. This file can also be reused if the projects need to be recreated from scratch again."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"stacks-cli interactive\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Please see the ",(0,i.jsx)(n.a,{href:"#.NET%20WebApi%20project%20using%20the%20interactive%20mode",children:"???"})," section for an example of how this command can be used."]}),"\n",(0,i.jsx)(n.p,{children:"The CLI allows properties to be set that influence the way that the project is scaffolded. Up to five of these properties can be set. However the interactive command only asks once if properties are required. To set more than property, please separate the values using a comma."}),"\n",(0,i.jsx)(n.h3,{id:"scaffold",children:"Scaffold"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"scaffold"})," command is the main command that will be used. This downloads the specified projects, customises them and sets them up in the specified directory. To see the help for this command run the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"stacks-cli scaffold -h\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Help page for scaffold command",src:s(1419).A+"",width:"1494",height:"1329"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"#Examples",children:"???"})," section has a lot of examples showing how to run the Ensono Stacks CLI, the following show some simple uses of the command."]}),"\n",(0,i.jsx)(n.h2,{id:"validation",children:"Validation"}),"\n",(0,i.jsx)(n.p,{children:"The CLI will validate certain inputs to make sure that they are valid for use with the scaffolding commands as defined by the project settings."}),"\n",(0,i.jsx)(n.p,{children:"In some cases the CLI will modify the inputs, for example if a space is present in the company name it will be replaced with an underscore:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'"My Company" \u2192 "My_Company"'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'"My Fantastic Company" \u2192 "My_Fantastic_Company"'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'"My Company" \u2192 "My_Company"'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"command-availability-checks",children:"Command Availability Checks"}),"\n",(0,i.jsx)(n.p,{children:"Each framework has a list of commands associated with it. This denotes the list of commands that it can run during the configuration of the project."}),"\n",(0,i.jsx)(n.p,{children:"When the application runs, it will determine the frameworks that have been selected in the projects and perform a check to see if those commands are available on the machine. It does this by checking the PATH variable for the command. This check is performed very early on in the process so it does not cause an issue when iterating around the projects that need to be setup."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Note"})}),"\n",(0,i.jsx)(n.p,{children:"It is not possible for the Ensono Stacks project to specify the full path to the command because it can be different on each and every machine that the Ensono Stacks CLI will run on."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The commands for each of the supported frameworks are as follows:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Framework"}),(0,i.jsx)(n.th,{children:"Commands"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"dotnet"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dotnet"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"java"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"java"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Nx"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"node"}),", ",(0,i.jsx)(n.code,{children:"npx"})]})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Framework Commands"}),"\n",(0,i.jsx)(n.p,{children:"If a command cannot be located, the CLI will be terminated. This does not mean the command does not exist on the machine, rather that it is not accessble using the PATH environment variable. The Ensono Stacks CLI is not a package manager and as such will not attempt to install the missing commands."}),"\n",(0,i.jsxs)(n.p,{children:['The following screenshot shows the output of a scaffolding run where the "dotnet" framework has been specified and the ',(0,i.jsx)(n.code,{children:"dotnet"})," command cannot be found:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Checking availability for framework commands",src:s(7208).A+"",width:"1494",height:"630"})}),"\n",(0,i.jsx)(n.p,{children:"If multiple frameworks have been set, by specifying multiple projects, each framework\u2019s commands will be checked for availability."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Note"})}),"\n",(0,i.jsx)(n.p,{children:"Although the screenshot shows the detection of the framework commands when running from a configuration file, the same checks are performed when with arguments on the command line."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,i.jsx)(n.p,{children:"The Ensono Stacks CLI is designed to be as simple and efficient to use as possible, however there are cases when it is useful to gewt more information from the CLI when it is being run."}),"\n",(0,i.jsxs)(n.p,{children:["Bu default the CLI runs with ",(0,i.jsx)(n.code,{children:"info"})," level logging, which means that simple messages about what is happening are displayed. If an error occurs within the CLI itself then this will be displayed, however when the CLI runs an external command, as is the case when it runs configuration from a project, and it fails you may see messages similar to the following:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Errors from the operations that the CLI runs",src:s(3433).A+"",width:"1494",height:"837"})}),"\n",(0,i.jsxs)(n.p,{children:["This is not terribly helpful to understand what is happening. This is ocurring because the CLI is running other commands that are outputting to ",(0,i.jsx)(n.code,{children:"stderr"})," which the CLI does not show by default. To change this behaviour change the logging to ",(0,i.jsx)(n.code,{children:"debug"})," or ",(0,i.jsx)(n.code,{children:"trace"})," and the output will no include all of the commands that are being run as well any output on ",(0,i.jsx)(n.code,{children:"stdout"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Showing commands using debug log level",src:s(2934).A+"",width:"1494",height:"883"})}),"\n",(0,i.jsx)(n.h2,{id:"connectivity-check",children:"Connectivity Check"}),"\n",(0,i.jsxs)(n.p,{children:["As the CLI relies heavily on being able to contact GitHub, it checks to see if the ",(0,i.jsx)(n.code,{children:"github.com"})," domain can be resolved. It does this as one of the first checks it performs. If it cannot resolve the address then it will terminate execution with an error similar to the following."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Ensono Stacks CLI failed connectivity check",src:s(2239).A+"",width:"1494",height:"534"})}),"\n",(0,i.jsx)(n.h2,{id:"cli-version-check",children:"CLI Version Check"}),"\n",(0,i.jsx)(n.p,{children:"The Ensono Stacks CLI is constantly evolving and as such there are new versions being released frequently. To help ensure that you are running the most up to date version, it will check the releases for the CLI and compare that version against the one that you are running. If there is a mismatch then the CLI will inform you of the newer version."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Note"})}),"\n",(0,i.jsxs)(n.p,{children:["This check does not prevent normal operation if you have an older version. However you ",(0,i.jsx)(n.em,{children:"may"})," find that some things do not work as you intend."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Ensono Stacks CLI version check",src:s(1082).A+"",width:"1494",height:"883"})}),"\n",(0,i.jsx)(n.p,{children:"This is a simple version check, it does not update the CLI for you, but does provide a link to the latest version for download and information purposes."}),"\n",(0,i.jsxs)(n.p,{children:["The version check can be turned off using the ",(0,i.jsx)(n.code,{children:"--nocliversion"})," option or the ",(0,i.jsx)(n.code,{children:"options.nocliversion"})," in a configuration file or using the ",(0,i.jsx)(n.code,{children:"ENSONOSTACKS_OPTIONS_NOCLIVERSION"})," environment variable."]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},9326:(e,n,s)=>{s.d(n,{A:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABhklEQVRIid3WsUtVURwH8I8+KxpEFCIpSGm0IcHJNagGkXBqsqVF8E8QaX2bgyCFOLgYCjU01+JSNLiIgYuD1KCW4qL4HqjD8eH18bzv3ufhDn3ht7x7OJ977v29c25JvDzGBB5gI+K816aEMqo4w3QRKCxcgLV6VgQ6Woeuo60IeDWBHmGoCLTD5Xv9hxdFoNCOFUyhN/bk9/AOP7CLTXzAcGJMD97i88X1ffzCLPpaQV/h0NXmSdYWfqKSMuYYk3nQMZymTJi3RrKgD3EQEV3ErSzwTET0i4z/6zb8iYRW0J8FhUcRV/stDWpvAMdK6glVD3dEhFNTD+9FnHsgz+Bu8d5xVfgoyJztiPjydUipwW9PMZjnTlPyRHiKX4WdMDWvxVtxrb7jfjP4jnASxYT3cDuJ1Hc1nGC+2d3lzHthJ2uaLuyIs9pd4czOnDeR4PE8aC1LN0Q/tYLCXVe/JJNVwW+hJxpdX0NnqzChy8v4K3TnMl663ANKeI6PQl8cYu6m6P+Xc8XOMKLBaakoAAAAAElFTkSuQmCC"},8476:(e,n,s)=>{s.d(n,{A:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAACLklEQVRIia3WzYuPURQH8M+MGYyXvAzFBuVtpEix0EQWsrCgNFkojQVJKSLiL9Ck1GSBxCzFiiykLJS3lBiZoZDXIpEGEZr6WZz7m/n1m3meeWbMqdut5/me873n3Hu/51LcluIMuvEIxzB9GP6FbBl+oVQxLuIlZowm0ekqkhK+pLl9NIluiIx+puBdeIy/+DiaRNexEifxHAuxCD2JeNpQAWoKEl1DLe6hEbPF/qzF6kTUkxegriDRB8zEQZHBZHRgSvo/D515AcYUJJqIHSKbsbiNOfiGSWkhd/MC1BYkWosDuIU7aMARcRDa0TqMWJnWKPZjjLhPG1BfsYDycd/5PyQ1uIzdOZjORPQd80dKtD8Fac7B7NOf1W0jKOEsscqHWJWDm4rPaZSwa7hEp/BeXMyh7Dg+4W3yqc+H91sjXuFCQfw6kc3NNG+tBmTVsxXjcaUgUXeaG9K8sShRC3rxrCBRWX5607ygGpAlQVcxQdS9iNUKdajBG3wt4rRQSMsvbDJ0Y1uBJ0Ihyg3xUJ7DXCEzr/Xfixdow5Icv5aE7cBZcSByM7pvYBct4bzoQcsz/LZl+B2uBFUehh8ZgbbjEsYN8q9BXOzBrA0nBiPKumR1ojxPq743iypk6VtJtPq+IGXLezotxlHx5BqPJrGnH0S3rbYu7BHaN4BoM7ZgTRrV74A/QvveCcXuTf5NVbhz2IvfOQvvszqsF4+RTnF0x2Zg1wnhfSAUZVD7B3Sdh/2umi0IAAAAAElFTkSuQmCC"},8581:(e,n,s)=>{s.d(n,{A:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAAqklEQVRIie3WwQpBQRSA4Y8sWNrZKLFR7K1ISfHCiuIh2HgVKzZD3G7hdhti/jpNp2bOP1PTzCHx61RKrFVFGz10w3gfB4yLFq9jgFHI+1jhiBPOT+JGLad4M+w4LzrhZDvM0MKyyAmy4g3mRQq9SzWTR5HmiaORxL8vTjx78q6xDfOnb6x5eDL/73Il8cfE61ji7H+88FojEJ0GhkpofWI2e3tMSvQlvpwLGdY12BJghsEAAAAASUVORK5CYII="},231:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-completion-help-2d57aed4f1171335a608898bf74e78ef.png"},2239:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-connectivity-check-5ce9dcf830ad671e0f9ef5a8ebaf6d4e.png"},7208:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-framework-cmd-availability-13c837bad63b77af07fe2da9b1ec4886.png"},8010:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-global-help-5a14a66043c8022610a5bb87e802544f.png"},2934:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-op-debug-bb9cae72781680431bbea678c8117d79.png"},3433:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-op-error-5be372c38a6189a8986fe01193c7e823.png"},1419:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-scaffold-help-9d9f090dab8022b7021b7eb7caebceac.png"},1082:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/stackscli-version-check-74b46553c6a2167b23dcf191581455d2.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const t={},o=i.createContext(t);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);