"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[3739,4422],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),g=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=g(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=g(n),d=o,f=u["".concat(l,".").concat(d)]||u[d]||p[d]||i;return n?r.createElement(f,a(a({ref:t},s),{},{components:n})):r.createElement(f,a({ref:t},s))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[u]="string"==typeof e?e:o,a[1]=c;for(var g=2;g<i;g++)a[g]=n[g];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3602:function(e,t,n){n.r(t);var r=n(7294);t.default=function(e){var t=e.next,n=e.prev;return r.useEffect((function(){if(t){var e=document.querySelector("div.pagination-nav__item.pagination-nav__item--next>a");e&&e.style&&(e.style.display="none")}if(n){var r=document.querySelector("div.pagination-nav__item>a");r&&r.style&&(r.style.display="none")}})),r.createElement("div",null)}},6309:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return g},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var r=n(7462),o=n(3366),i=(n(7294),n(3905)),a=n(3602),c=["components"],l={id:"configure_swagger_ui_netcore",title:"Configure Swagger UI",hide_title:!0,sidebar_label:"Swagger UI",hide_table_of_contents:!0,description:"Swagger UI configuration for the .NET Core REST API application",keywords:[".net core","rest api","tests","stacks","swagger","swagger ui","registration","controller","configuration","dotnet"]},g=void 0,s={unversionedId:"workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_ui_netcore",id:"workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_ui_netcore",isDocsHomePage:!1,title:"Configure Swagger UI",description:"Swagger UI configuration for the .NET Core REST API application",source:"@site/docs/workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_ui_netcore.md",sourceDirName:"workloads/azure/backend/netcore/architecture/swagger_configuration",slug:"/workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_ui_netcore",permalink:"/docs/workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_ui_netcore",tags:[],version:"current",frontMatter:{id:"configure_swagger_ui_netcore",title:"Configure Swagger UI",hide_title:!0,sidebar_label:"Swagger UI",hide_table_of_contents:!0,description:"Swagger UI configuration for the .NET Core REST API application",keywords:[".net core","rest api","tests","stacks","swagger","swagger ui","registration","controller","configuration","dotnet"]},sidebar:"docs",previous:{title:"Swagger",permalink:"/docs/workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_netcore"},next:{title:"Testing the API",permalink:"/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore"}},u=[{value:"Configure Swagger UI",id:"configure-swagger-ui",children:[{value:"Configure the Swagger UI.Interface to consume the generated documents",id:"configure-the-swagger-uiinterface-to-consume-the-generated-documents",children:[],level:3}],level:2}],p={toc:u};function d(e){var t=e.components,l=(0,o.Z)(e,c);return(0,i.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"configure-swagger-ui"},"Configure Swagger UI"),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"configure-the-swagger-uiinterface-to-consume-the-generated-documents"},"Configure the Swagger UI.Interface to consume the generated documents"),(0,i.kt)("p",null,"To configure the Swagger UI, spec path along with the name of the spec must be passed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"SwaggerEndpoint()")," method within the ",(0,i.kt)("inlineCode",{parentName:"p"},"UseSwaggerUI()")," extension."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'{19} title="Startup.cs"',"{19}":!0,title:'"Startup.cs"'},'public class Startup\n{\n    public Startup(IHostingEnvironment env, IConfiguration configuration){... Omit for brevity ...}\n\n    public void ConfigureServices(IServiceCollection services){ ... Omit for brevity ... }\n\n    // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n    public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n    {\n        app\n            .UseMvc()\n            .UseSwagger()\n            .UseSwaggerUI(c =>\n            {\n                //Display the OperationID (ActionName) in the UI\n                c.DisplayOperationId();\n\n                //Load the document generated by AddSwaggerGen() inside ConfigureServices()\n                c.SwaggerEndpoint("v1/swagger.json", "Menu (version 1)");\n            });\n    }\n}\n')),(0,i.kt)("p",null,"The above snippet registers the ",(0,i.kt)("inlineCode",{parentName:"p"},"v1/swagger.json")," in the UI. Once the UI is loaded,  the documents registered by ",(0,i.kt)("inlineCode",{parentName:"p"},"SwaggerEndpoint()")," will be loaded."),(0,i.kt)("br",null),(0,i.kt)("p",null,"For registering multiple spec versions, simply register multiple document generations by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},".AddSwaggerGen(c => ...)")," multiple times, changing just the document filter from ",(0,i.kt)("inlineCode",{parentName:"p"},"/v1")," to the version desired."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Swagger multiple doc spec"',title:'"Swagger',multiple:!0,doc:!0,'spec"':!0},'From:\nSwaggerDoc("v1", new Info());\nc.DocumentFilter<VersionPathFilter>("/v1");\n\nTo:\nSwaggerDoc("v2", new Info());\nc.DocumentFilter<VersionPathFilter>("/v2");\n')),(0,i.kt)("p",null,"And register the new endpoint in the UI like below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Swagger UI registration"',title:'"Swagger',UI:!0,'registration"':!0},'app\n    .UseMvc()\n    .UseSwagger()\n    .UseSwaggerUI(c =>\n    {\n        //Display the OperationID (ActionName) in the UI\n        c.DisplayOperationId();\n\n        //Load the document generated by AddSwaggerGen() inside ConfigureServices()\n        c.SwaggerEndpoint("v1/swagger.json", "Menu (version 1)");\n        c.SwaggerEndpoint("v2/swagger.json", "Menu (version 2)");\n    });\n')),(0,i.kt)("p",null,"When multiple versions are available, might be useful to register a general spec with all endpoints"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Swagger default spec with all endpoints"',title:'"Swagger',default:!0,spec:!0,with:!0,all:!0,'endpoints"':!0},'SwaggerDoc("all", new Info());\n//c.DocumentFilter<VersionPathFilter>("/v2"); //Remove the filter\n')),(0,i.kt)("p",null,"Annotate controllers with endpoint details to group in the right spec.\nOpenAPI uses the concept of tags to group endpoints related to the same resource type, each tag will represent a group in the swagger ui."),(0,i.kt)("p",null,"By default, Swagger doc generation creates a tag using the controller name. This way, multiple actions(endpoints) found inside the same controller will be grouped in the same tag."),(0,i.kt)("p",null,"The problem with this approach is that makes it harder to group endpoints if they are located on different controllers. To avoid this problem, Swagger can be configured to group the endpoints by ApiGroup."),(0,i.kt)("p",null,"ApiGroup is a concept introduced in ASP.NET Core. It requires the controller to be decorated with the attribute ApiExplorerSettingsAttribute, the GroupName  to be set to the Tag expected in swagger as below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Controller decorated with Api Group"',title:'"Controller',decorated:!0,with:!0,Api:!0,'Group"':!0},'[ApiExplorerSettings(GroupName = "Category")]\npublic class AddMenuCategoryController : ControllerBase { ... actions ... }\n')),(0,i.kt)("p",null,"To group api endpoints by something other than the default group, change the ",(0,i.kt)("inlineCode",{parentName:"p"},"c.DocInclusionPredicate()")," filter used in the default group, otherwise the endpoints won't be included in the docs."),(0,i.kt)("p",null,"To group endpoints pass the group predicate to the method ",(0,i.kt)("inlineCode",{parentName:"p"},"c.TagActionsBy()"),"."),(0,i.kt)("p",null,"The following code has to be added to the swagger doc generation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Swagger configuration for ApiGroup"',title:'"Swagger',configuration:!0,for:!0,'ApiGroup"':!0},'services.AddSwaggerGen(c => {\n\n    //By Default, all endpoints are grouped by the controller name\n    //We want to Group by Api Group first, then by controller name if group not provided\n    c.TagActionsBy((api) => new[] { api.GroupName ?? api.ActionDescriptor.RouteValues["controller"] });\n\n    //Include all endpoints available in the document\n    c.DocInclusionPredicate((docName, apiDesc) => { return true; });\n});\n')),(0,i.kt)("p",null,"The swagger configuration is complete and the swagger ui should be available as below."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Swagger UI",src:n(7205).Z})),(0,i.kt)(a.default,{next:!0,mdxType:"HideNavigation"}))}d.isMDXComponent=!0},7205:function(e,t,n){t.Z=n.p+"assets/images/swagger-ui-info-6770d7c76d6846ad13f91895148c2c94.png"}}]);