"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[885,57],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,d=p["".concat(l,".").concat(m)]||p[m]||g[m]||i;return n?a.createElement(d,o(o({ref:t},c),{},{components:n})):a.createElement(d,o({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7294),r=n(6010),i={tabItem:"tabItem_Ymn6"};function o(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,o),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(7462),r=n(7294),i=n(6010),o=n(2466),s=n(6550),l=n(1980),u=n(7392),c=n(12);function p(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function g(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:p(n);return function(e){var t=(0,u.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function d(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,i=(0,s.k6)(),o=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,l._X)(o),(0,r.useCallback)((function(e){if(o){var t=new URLSearchParams(i.location.search);t.set(o,e),i.replace(Object.assign({},i.location,{search:t.toString()}))}}),[o,i])]}function f(e){var t,n,a,i,o=e.defaultValue,s=e.queryString,l=void 0!==s&&s,u=e.groupId,p=g(e),f=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:o,tabValues:p})})),h=f[0],k=f[1],b=d({queryString:l,groupId:u}),v=b[0],y=b[1],N=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),n=(0,c.Nk)(t),a=n[0],i=n[1],[a,(0,r.useCallback)((function(e){t&&i.set(e)}),[t,i])]),w=N[0],I=N[1],x=function(){var e=null!=v?v:w;return m({value:e,tabValues:p})?e:null}();return(0,r.useLayoutEffect)((function(){x&&k(x)}),[x]),{selectedValue:h,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:p}))throw new Error("Can't select invalid tab value="+e);k(e),y(e),I(e)}),[y,I,p]),tabValues:p}}var h=n(2389),k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){var t=e.className,n=e.block,s=e.selectedValue,l=e.selectValue,u=e.tabValues,c=[],p=(0,o.o5)().blockElementScrollPositionUntilNextRender,g=function(e){var t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==s&&(p(t),l(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":var a,r=c.indexOf(e.currentTarget)+1;n=null!=(a=c[r])?a:c[0];break;case"ArrowLeft":var i,o=c.indexOf(e.currentTarget)-1;n=null!=(i=c[o])?i:c[c.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t)},u.map((function(e){var t=e.value,n=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:function(e){return c.push(e)},onKeyDown:m,onClick:g},o,{className:(0,i.Z)("tabs__item",k.tabItem,null==o?void 0:o.className,{"tabs__item--active":s===t})}),null!=n?n:t)})))}function v(e){var t=e.lazy,n=e.children,a=e.selectedValue,i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var o=i.find((function(e){return e.props.value===a}));return o?(0,r.cloneElement)(o,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},i.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function y(e){var t=f(e);return r.createElement("div",{className:(0,i.Z)("tabs-container",k.tabList)},r.createElement(b,(0,a.Z)({},e,t)),r.createElement(v,(0,a.Z)({},e,t)))}function N(e){var t=(0,h.Z)();return r.createElement(y,(0,a.Z)({key:String(t)},e))}},7052:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={},l=void 0,u={unversionedId:"getting_started/azure-react/generator-app-insights-web",id:"getting_started/azure-react/generator-app-insights-web",title:"generator-app-insights-web",description:"@ensono-stacks/azure-react:app-insights-web",source:"@site/docs/getting_started/azure-react/generator-app-insights-web.md",sourceDirName:"getting_started/azure-react",slug:"/getting_started/azure-react/generator-app-insights-web",permalink:"/docs/getting_started/azure-react/generator-app-insights-web",draft:!1,tags:[],version:"current",frontMatter:{}},c={},p=[{value:"@ensono-stacks/azure-react:app-insights-web",id:"ensono-stacksazure-reactapp-insights-web",level:3},{value:"Usage",id:"usage",level:2},{value:"Command line arguments",id:"command-line-arguments",level:3},{value:"Generator Output",id:"generator-output",level:3},{value:"Using Application Insights",id:"using-application-insights",level:3}],g={toc:p},m="wrapper";function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)(m,(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"ensono-stacksazure-reactapp-insights-web"},"@ensono-stacks/azure-react:app-insights-web"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Installs and configures a ReactJS Library with App Insights."),(0,i.kt)("p",null,"This enables the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Tracking of router changes"),(0,i.kt)("li",{parentName:"ul"},"React components usage statistics")),(0,i.kt)("p",null,"This generator will create a new ReactJS Library with ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@microsoft/applicationinsights-react-js"},"applicationinsights reactjs")," and ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@microsoft/applicationinsights-web"},"applicationinsights web")," npm packages installed and configured for you. This can then be imported an used in an existing ReactJS application."),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx generate @ensono-stacks/azure-react:app-insights-web\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"App insights requires the connection string environment variable to be set to the value set within Azure. The name of the connection string variable is set in the generator options ",(0,i.kt)("inlineCode",{parentName:"p"},"--connectionString"),". Please see ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-gb/azure/azure-monitor/app/sdk-connection-string?tabs=net"},"documentation on connection strings")," for more information")),(0,i.kt)("h3",{id:"command-line-arguments"},"Command line arguments"),(0,i.kt)("p",null,"The following command line arguments are available:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--name"),(0,i.kt)("td",{parentName:"tr",align:null},"Library name"),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Required")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--connectionString"),(0,i.kt)("td",{parentName:"tr",align:null},"The env variable for the connection string."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Required")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--directory"),(0,i.kt)("td",{parentName:"tr",align:null},"A directory where the lib is placed."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--importPath"),(0,i.kt)("td",{parentName:"tr",align:null},"What import path would you like to use for the library?."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"--tags"),(0,i.kt)("td",{parentName:"tr",align:null},"Add tags to the library (used for linting)."),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional")))),(0,i.kt)("h3",{id:"generator-output"},"Generator Output"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adds an app insights config file")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/src/app-insights-config.ts"',title:'"/src/app-insights-config.ts"'},"// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  DistributedTracingModes,\n  IConfig,\n} from '@microsoft/applicationinsights-common';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport type { IConfiguration } from '@microsoft/applicationinsights-core-js';\n\nconst appInsightConfig: IConfiguration & IConfig = {\n  enableAutoRouteTracking: false,\n  enableCorsCorrelation: true,\n  enableRequestHeaderTracking: true,\n  enableResponseHeaderTracking: true,\n  disableFetchTracking: false,\n  distributedTracingMode: DistributedTracingModes.AI_AND_W3C,\n  enableAjaxPerfTracking: true\n};\n\nexport default appInsightConfig;\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adds a telemetry provider ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/src/telemetry-provider.tsx"',title:'"/src/telemetry-provider.tsx"'},"import {\n  ReactPlugin,\n  AppInsightsContext,\n} from '@microsoft/applicationinsights-react-js';\nimport { ApplicationInsights } from '@microsoft/applicationinsights-web';\nimport { FC, ReactNode } from 'react';\n\nimport appInsightConfig from './app-insights-config';\n\nconst reactPlugin = new ReactPlugin();\nconst connectionString = process.env.<%= connectionString %>;\n\nexport const appInsights = new ApplicationInsights({\n  config: {\n    connectionString,\n    ...appInsightConfig,\n    extensions: [reactPlugin],\n  },\n});\n\nif (!appInsights.appInsights.isInitialized()) {\n  appInsights.loadAppInsights();\n}\n\nexport const TelemetryProvider: FC<{ children?: ReactNode }> = ({ children }) => (\n  <AppInsightsContext.Provider value={reactPlugin}>\n    {children}\n  </AppInsightsContext.Provider>\n);\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Installs and adds microsoft applicationinsights packages to package.json")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/package.json"',title:'"/package.json"'},'  "dependencies": {\n    ...OtherDependencies\n    "@microsoft/applicationinsights-react-js": "3.4.0",\n    "@microsoft/applicationinsights-web": "2.8.9",\n  }\n}\n')),(0,i.kt)("h3",{id:"using-application-insights"},"Using Application Insights"),(0,i.kt)("p",null,"To use the Application Insights react hooks within your application please import the generated library and wrap your application in the TelemetryProvider installed by the generator for example "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"import NxWelcome from './nx-welcome';\nimport { TelemetryProvider } from 'packages/nameOfGeneratedAppInsightsLibrary/src';\n\nexport function App() {\n    return (\n        <TelemetryProvider>\n            <NxWelcome title=\"welcome title\" />\n            <div />\n        </TelemetryProvider>\n    );\n}\n\nexport default App;\n\n")),(0,i.kt)("p",null,"From here a ",(0,i.kt)("inlineCode",{parentName:"p"},"useAppInsightsContext")," hook will be available to use anywhere within your ReactJS App. For example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'import React from "react";\nimport { useAppInsightsContext } from "@microsoft/applicationinsights-react-js";\n\nconst MyComponent = () => {\n    const appInsights = useAppInsightsContext();\n    const metricData = {\n        average: engagementTime,\n        name: "React Component Engaged Time (seconds)",\n        sampleCount: 1\n      };\n    const additionalProperties = { "Component Name": \'MyComponent\' };\n    appInsights.trackMetric(metricData, additionalProperties);\n    \n    return (\n        <h1>My Component</h1>\n    );\n}\nexport default MyComponent;\n')),(0,i.kt)("p",null,"Full documentation and a getting started guide can be found at ",(0,i.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-gb/azure/azure-monitor/app/javascript-react-plugin"},"React plug-in for Application Insights JavaScript SDK"))))}d.isMDXComponent=!0},7066:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return c},metadata:function(){return g},toc:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(7052),s=n(4866),l=n(5162),u=["components"],c={id:"ensono-stacks-azure-react",title:"@ensono-stacks/azure-react",sidebar_label:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",keywords:["Nx","monorepo","stacks","ensono","azure-react","generator","executor","appinsights"]},p=void 0,g={unversionedId:"getting_started/azure-react/ensono-stacks-azure-react",id:"getting_started/azure-react/ensono-stacks-azure-react",title:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",source:"@site/docs/getting_started/azure-react/plugin-information.md",sourceDirName:"getting_started/azure-react",slug:"/getting_started/azure-react/ensono-stacks-azure-react",permalink:"/docs/getting_started/azure-react/ensono-stacks-azure-react",draft:!1,tags:[],version:"current",frontMatter:{id:"ensono-stacks-azure-react",title:"@ensono-stacks/azure-react",sidebar_label:"@ensono-stacks/azure-react",description:"Configures a ReactJS application for Azure!",keywords:["Nx","monorepo","stacks","ensono","azure-react","generator","executor","appinsights"]}},m={},d=[{value:"Setting up @ensono-stacks/azure-react",id:"setting-up-ensono-stacksazure-react",level:2},{value:"Executors and Generators",id:"executors-and-generators",level:2},{value:"Generators",id:"generators",level:3}],f={toc:d},h="wrapper";function k(e){var t=e.components,n=(0,r.Z)(e,u);return(0,i.kt)(h,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Configures your ReactJS application to use various Azure services:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/applicationinsights"},"App Insights")),(0,i.kt)("li",{parentName:"ul"},"...more to come.")),(0,i.kt)("h2",{id:"setting-up-ensono-stacksazure-react"},"Setting up @ensono-stacks/azure-react"),(0,i.kt)("p",null,"Install the ",(0,i.kt)("inlineCode",{parentName:"p"},"@ensono-stacks/azure-react")," plugin with the following command:"),(0,i.kt)(s.Z,{mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"npm",label:"npm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev @ensono-stacks/azure-react@latest\n"))),(0,i.kt)(l.Z,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add --dev @ensono-stacks/azure-react@latest\n")))),(0,i.kt)("h2",{id:"executors-and-generators"},"Executors and Generators"),(0,i.kt)("p",null,"To see a list of the plugin capabilities run the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx list @ensono-stacks/azure-react\n")),(0,i.kt)("p",null,"View additional information about a plugin capability through the following commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nx g @ensono-stacks/azure-react:app-insights-web --help\n")),(0,i.kt)("h3",{id:"generators"},"Generators"),(0,i.kt)(o.default,{mdxType:"GeneratorAppInsights"}))}k.isMDXComponent=!0}}]);