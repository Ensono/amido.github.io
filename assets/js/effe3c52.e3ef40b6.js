"use strict";(self.webpackChunkstacks=self.webpackChunkstacks||[]).push([[8622],{9140:(e,x,t)=>{t.r(x),t.d(x,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=t(4848),n=t(8453);const r={id:"project_structure_netcore_cqrs",title:"CQRS Rest Api Solution Structure",sidebar_label:"CQRS Rest Api Solution Structure",hide_title:!0,hide_table_of_contents:!0,description:".NET CQRS REST API application - Solution Structure",keywords:[".net","rest api","example","template","repository","structure"]},i=void 0,o={id:"workloads/azure/backend/netcore/architecture/project_structure/project_structure_netcore_cqrs",title:"CQRS Rest Api Solution Structure",description:".NET CQRS REST API application - Solution Structure",source:"@site/docs/workloads/azure/backend/netcore/architecture/project_structure/cqrs_netcore.md",sourceDirName:"workloads/azure/backend/netcore/architecture/project_structure",slug:"/workloads/azure/backend/netcore/architecture/project_structure/project_structure_netcore_cqrs",permalink:"/docs/workloads/azure/backend/netcore/architecture/project_structure/project_structure_netcore_cqrs",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"project_structure_netcore_cqrs",title:"CQRS Rest Api Solution Structure",sidebar_label:"CQRS Rest Api Solution Structure",hide_title:!0,hide_table_of_contents:!0,description:".NET CQRS REST API application - Solution Structure",keywords:[".net","rest api","example","template","repository","structure"]},sidebar:"docs",previous:{title:"Simple Api Solution Structure",permalink:"/docs/workloads/azure/backend/netcore/architecture/project_structure/project_structure_netcore_simple_api"},next:{title:"Functions And Worker Solution Structure",permalink:"/docs/workloads/azure/backend/netcore/architecture/project_structure/project_structure_netcore_function_worker"}},a={},c=[{value:"Solution Structure",id:"solution-structure",level:2},{value:"Web API with CQRS",id:"web-api-with-cqrs",level:3},{value:"xxENSONOxx.xxSTACKSxx.API",id:"xxensonoxxxxstacksxxapi",level:4},{value:"xxENSONOxx.xxSTACKSxx.API.Infrastructure",id:"xxensonoxxxxstacksxxapiinfrastructure",level:4},{value:"xxENSONOxx.xxSTACKSxx.Application.CommandHandlers",id:"xxensonoxxxxstacksxxapplicationcommandhandlers",level:4},{value:"xxENSONOxx.xxSTACKSxx.Application.Integration",id:"xxensonoxxxxstacksxxapplicationintegration",level:4},{value:"xxENSONOxx.xxSTACKSxx.Application.QueryHandlers",id:"xxensonoxxxxstacksxxapplicationqueryhandlers",level:4},{value:"xxENSONOxx.xxSTACKSxx.Abstractions",id:"xxensonoxxxxstacksxxabstractions",level:4},{value:"xxENSONOxx.xxSTACKSxx.Common",id:"xxensonoxxxxstacksxxcommon",level:4},{value:"xxENSONOxx.xxSTACKSxx.CQRS",id:"xxensonoxxxxstacksxxcqrs",level:4},{value:"xxENSONOxx.xxSTACKSxx.Domain",id:"xxensonoxxxxstacksxxdomain",level:4},{value:"xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus",id:"xxensonoxxxxstacksxxsharedmessagingazureservicebus",level:4},{value:"xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus.Tests",id:"xxensonoxxxxstacksxxsharedmessagingazureservicebustests",level:4},{value:"xxENSONOxx.xxSTACKSxx.API.ComponentTests",id:"xxensonoxxxxstacksxxapicomponenttests",level:4},{value:"xxENSONOxx.xxSTACKSxx.API.UnitTests",id:"xxensonoxxxxstacksxxapiunittests",level:4},{value:"xxENSONOxx.xxSTACKSxx.Common.UnitTests",id:"xxensonoxxxxstacksxxcommonunittests",level:4},{value:"xxENSONOxx.xxSTACKSxx.CQRS.UnitTests",id:"xxensonoxxxxstacksxxcqrsunittests",level:4},{value:"xxENSONOxx.xxSTACKSxx.Domain.UnitTests",id:"xxensonoxxxxstacksxxdomainunittests",level:4},{value:"xxENSONOxx.xxSTACKSxx.Infrastructure.IntegrationTests",id:"xxensonoxxxxstacksxxinfrastructureintegrationtests",level:4},{value:"xxENSONOxx.xxSTACKSxx.Infrastructure.UnitTests",id:"xxensonoxxxxstacksxxinfrastructureunittests",level:4},{value:"xxENSONOxx.xxSTACKSxx.AppHost",id:"xxensonoxxxxstacksxxapphost",level:4}];function l(e){const x={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.h2,{id:"solution-structure",children:"Solution Structure"}),"\n",(0,s.jsx)(x.h3,{id:"web-api-with-cqrs",children:"Web API with CQRS"}),"\n",(0,s.jsx)(x.pre,{children:(0,s.jsx)(x.code,{className:"language-text",children:"Solution xxENSONOxx.xxSTACKSxx.API\n\u251c\u2500\u2500 API\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.API\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.API.Infrastructure\n\u251c\u2500\u2500 Application\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Application.CommandHandlers\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Application.Integration\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Application.QueryHandlers\n\u251c\u2500\u2500 Common\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Abstractions\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Common\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.CQRS\n\u2502  \u2514\u2500\u2500 External\n\u251c\u2500\u2500 Domain\n\u2502  \u2514\u2500\u2500 xxENSONOxx.xxSTACKSxx.Domain\n\u251c\u2500\u2500 Shared\n\u2502  \u251c\u2500\u2500 xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus\n\u2502  \u2514\u2500\u2500 xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus.Tests\n\u251c\u2500\u2500 Tests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.API.ComponentTests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.API.UnitTests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.Common.UnitTests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.CQRS.UnitTests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.Domain.UnitTests\n\u2502  \u251c\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.Infrastructure.IntegrationTests\n\u2502  \u2514\u2500\u2500\xa0xxENSONOxx.xxSTACKSxx.Infrastructure.UnitTests\n\u2514\u2500\u2500 xxENSONOxx.xxSTACKSxx.AppHost  \n"})}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapi",children:"xxENSONOxx.xxSTACKSxx.API"}),"\n",(0,s.jsx)(x.p,{children:"Contains controllers and OpenAPI documentation. Exposes the application via REST/HTTP endpoints and validates requests. Self-hosted, managed by Program.cs."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapiinfrastructure",children:"xxENSONOxx.xxSTACKSxx.API.Infrastructure"}),"\n",(0,s.jsx)(x.p,{children:"Handles cross-cutting concerns like logging, caching, and exception handling. Includes middleware and filters."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapplicationcommandhandlers",children:"xxENSONOxx.xxSTACKSxx.Application.CommandHandlers"}),"\n",(0,s.jsx)(x.p,{children:"Handles commands that change the application's state. Validates and processes commands."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapplicationintegration",children:"xxENSONOxx.xxSTACKSxx.Application.Integration"}),"\n",(0,s.jsx)(x.p,{children:"Interacts with external services, databases, and other resources. Handles data access and external communication."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapplicationqueryhandlers",children:"xxENSONOxx.xxSTACKSxx.Application.QueryHandlers"}),"\n",(0,s.jsx)(x.p,{children:"Handles queries for data from the application. Processes queries and returns data."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxabstractions",children:"xxENSONOxx.xxSTACKSxx.Abstractions"}),"\n",(0,s.jsx)(x.p,{children:"Contains interfaces and base classes for common patterns and behaviors."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxcommon",children:"xxENSONOxx.xxSTACKSxx.Common"}),"\n",(0,s.jsx)(x.p,{children:"Contains utility classes, extension methods, and shared code for logging, configuration, serialization, etc."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxcqrs",children:"xxENSONOxx.xxSTACKSxx.CQRS"}),"\n",(0,s.jsx)(x.p,{children:"Implements the Command Query Responsibility Segregation (CQRS) pattern. Separates read and write operations."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxdomain",children:"xxENSONOxx.xxSTACKSxx.Domain"}),"\n",(0,s.jsx)(x.p,{children:"Represents the core domain model. Includes entities, value objects, and business rules."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxsharedmessagingazureservicebus",children:"xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus"}),"\n",(0,s.jsx)(x.p,{children:"Interacts with Azure Service Bus for messaging. Manages queues, topics, and messaging tasks."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxsharedmessagingazureservicebustests",children:"xxENSONOxx.xxSTACKSxx.Shared.Messaging.Azure.ServiceBus.Tests"}),"\n",(0,s.jsx)(x.p,{children:"Contains unit tests for the messaging classes. Tests message processing, queue management, and other messaging tasks."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapicomponenttests",children:"xxENSONOxx.xxSTACKSxx.API.ComponentTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"ComponentTests"})," cover the entire service from the API endpoints to the last service layer before external dependencies. They mock resources like repositories and gateways to simulate various scenarios."]}),"\n",(0,s.jsx)(x.p,{children:"APIs should also be covered by Contract Tests. Component Tests might seem redundant but can skip API coverage and focus on the application layer to the service boundary. This approach requires an extra test to ensure API and Application integration."}),"\n",(0,s.jsx)(x.p,{children:"Component tests are similar to functional tests but with a key difference. Functional Tests check if an input produces the expected output without caring about the process. Component Tests ensure the input returns the expected output and that certain conditions are met, such as event raising, external service calls, and correct data formatting."}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapiunittests",children:"xxENSONOxx.xxSTACKSxx.API.UnitTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"UnitTests"})," cover the API project, including controllers, services, and repositories. They mock external dependencies like databases and external services to ensure the API behaves as expected."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxcommonunittests",children:"xxENSONOxx.xxSTACKSxx.Common.UnitTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"UnitTests"})," cover the Common project, including utility classes, extension methods, and other shared code. They test common tasks like logging, configuration, serialization, and other common tasks."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxcqrsunittests",children:"xxENSONOxx.xxSTACKSxx.CQRS.UnitTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"UnitTests"})," cover the CQRS project, including classes that implement the Command Query Responsibility Segregation (CQRS) pattern. They test command handlers, query handlers, and other components that separate read and write operations in the application."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxdomainunittests",children:"xxENSONOxx.xxSTACKSxx.Domain.UnitTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"UnitTests"})," cover the Domain project, including classes that represent the core domain model of the application. They test entities, value objects, and other domain-specific classes that define the application's data model and business rules."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxinfrastructureintegrationtests",children:"xxENSONOxx.xxSTACKSxx.Infrastructure.IntegrationTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"IntegrationTests"})," cover the Integration project, including classes that interact with external services, databases, and other resources. They test repositories, gateways, and other classes that handle data access and external communication."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxinfrastructureunittests",children:"xxENSONOxx.xxSTACKSxx.Infrastructure.UnitTests"}),"\n",(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.strong,{children:"UnitTests"})," cover the Infrastructure project, including classes that handle cross-cutting concerns like logging, caching, and exception handling. They test middleware, filters, and other components that apply to the entire API."]}),"\n",(0,s.jsx)(x.h4,{id:"xxensonoxxxxstacksxxapphost",children:"xxENSONOxx.xxSTACKSxx.AppHost"}),"\n",(0,s.jsx)(x.p,{children:"The AppHost project is responsible for hosting the API and uses Aspire. Aspire is a lightweight, high-performance framework for building and hosting .NET applications. It provides essential features like dependency injection, configuration management, and middleware support."}),"\n",(0,s.jsx)(x.p,{children:"The AppHost project contains the Program.cs class, which configures the API and starts the host. The AppHost project should be kept as simple as possible to avoid adding unnecessary dependencies or logic."}),"\n",(0,s.jsxs)(x.admonition,{title:"Further Reading",type:"note",children:[(0,s.jsx)(x.p,{children:"For more information on CQRS, you can refer to the following resource:"}),(0,s.jsxs)(x.p,{children:[(0,s.jsx)(x.a,{href:"https://martinfowler.com/bliki/CQRS.html",children:"CQRS Documentation"})," by Martin Fowler"]})]})]})}function d(e={}){const{wrapper:x}={...(0,n.R)(),...e.components};return x?(0,s.jsx)(x,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,x,t)=>{t.d(x,{R:()=>i,x:()=>o});var s=t(6540);const n={},r=s.createContext(n);function i(e){const x=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(x):{...x,...e}}),[x,e])}function o(e){let x;return x=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(r.Provider,{value:x},e.children)}}}]);