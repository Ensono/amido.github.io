---
id: cmsosdb_visualstudio_setup_netcore
title: Setting up Cosmos DB key in Visual Studio
---

# Set up Cosmos DB key in Visual Studio

<br />

## Using CosmosDB Emulator


Add an environment variable to the launchSettings.json file generated by Visual Studio in the folder `src/api/xxAMIDOxx.xxSTACKSxx.API/properties/launchSettings.json`.

```json {6} title="src/api/xxAMIDOxx.xxSTACKSxx.API/properties/launchSettings.json"
"xxAMIDOxx.xxSTACKSxx.API": {
    "commandName": "Project",
    "launchBrowser": true,
    "environmentVariables": {
    "ASPNETCORE_ENVIRONMENT": "Development",
        "COSMOSDB_KEY": "<Add Cosmos DB Primary Key here>"
    },
    "applicationUrl": "https://localhost:5001;http://localhost:5000"
}
```

The variable name should be `COSMOSDB_KEY`. You can confirm the variable name by checking the `appsettings.json` file (`src/api/xxAMIDOxx.xxSTACKSxx.API/appsettings.json`) under the "CosmosDb.SecurityKeySecret.Identifier" property. See example at bottom of the page.

The value for `COSMOSDB_KEY` can be found within the emulator. See Primary Key:

![CosmosDB](/img/cosmosdb_emulator_3.png)


## Not using CosmosDb Emulator

<br />

Update the connection details in `appsettings.json` file as described here.

```json title="appsettings.json"
{
    ...
    "CosmosDb": {
        "DatabaseAccountUri": "https://localhost:8081/",
        "DatabaseName": "Stacks",
        "SecurityKeySecret": {
            "Identifier": "COSMOSDB_KEY",
            "Source": "Environment"
        }
    }
    ...
}
```




