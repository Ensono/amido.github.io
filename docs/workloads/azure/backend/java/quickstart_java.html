<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Amido Stacks " href="/opensearch.xml"><title data-react-helmet="true">Getting started with the Java Rest API application | Amido Stacks </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://stacks.amido.com/docs/workloads/azure/backend/java/quickstart_java"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting started with the Java Rest API application | Amido Stacks "><meta data-react-helmet="true" name="description" content="Getting started with the Java Rest API application"><meta data-react-helmet="true" property="og:description" content="Getting started with the Java Rest API application"><meta data-react-helmet="true" name="keywords" content="java,rest,api,application,spring boot,authorization,docker,swagger,auth0,settings,get started"><link data-react-helmet="true" rel="shortcut icon" href="/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://stacks.amido.com/docs/workloads/azure/backend/java/quickstart_java"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/java/quickstart_java" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/java/quickstart_java" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f0d040b2.css">
<link rel="preload" href="/assets/js/runtime~main.0d297d5a.js" as="script">
<link rel="preload" href="/assets/js/main.156a79fa.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_3oOy themedImage--light_3ouy"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_3oOy themedImage--dark_3zJb"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_2iFN toggle_2ySP toggleDisabled_1pbd"><div class="toggleTrack_1bVV" role="button" tabindex="-1"><div class="toggleTrackCheck_3GBG"><span class="toggleIcon_KBSf">ðŸŒœ</span></div><div class="toggleTrackX_1jae"><span class="toggleIcon_KBSf">ðŸŒž</span></div><div class="toggleTrackThumb_2_QT"></div></div><input type="checkbox" class="toggleScreenReader_32DE" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_DkI0" type="button"></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learn about Stacks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Workloads</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/workloads">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Azure</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Frontend Web Applications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Backend Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Java Spring Boot REST API</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/intro_java">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/requirements_java">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/setting_up_cosmos_db_locally_java">Cosmos DB Emulator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/backend/java/quickstart_java">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/scaffolding_java">Using the Maven Scaffolding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/ide_java">IDE guidelines</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/infrastructure_java">Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/java/pipeline_java">Pipeline</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Testing The API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">.NET Core</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Google Cloud Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Amazon Web Services</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Infrastructure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quality Assurance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Stacks CLI</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT theme-doc-toc-mobile tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Getting started with the Java Rest API application</h1></header><h2 class="anchor anchorWithStickyNavbar_1iPN" id="using-the-repository-to-build-the-java-spring-boot-rest-api-application">Using the repository to build the Java Spring Boot Rest API application<a aria-hidden="true" class="hash-link" href="#using-the-repository-to-build-the-java-spring-boot-rest-api-application" title="Direct link to heading">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_1iPN" id="running-the-application-locally">Running the application locally<a aria-hidden="true" class="hash-link" href="#running-the-application-locally" title="Direct link to heading">â€‹</a></h2><ol><li><h3 class="anchor anchorWithStickyNavbar_1iPN" id="clone-one-of-the-java-workloads-to-your-local-machine-from-one-of-the-following-repos">Clone one of the Java workloads to your local machine from one of the following repos<a aria-hidden="true" class="hash-link" href="#clone-one-of-the-java-workloads-to-your-local-machine-from-one-of-the-following-repos" title="Direct link to heading">â€‹</a></h3><ol><li>Simple web API: <a href="https://github.com/amido/stacks-java" target="_blank" rel="noopener noreferrer">stacks-java repository</a></li><li>Web API with CQRS: <a href="https://github.com/amido/stacks-java-cqrs" target="_blank" rel="noopener noreferrer">stacks-java-cqrs repository</a></li><li>Web API with CQRS and events: <a href="https://github.com/amido/stacks-java-cqrs-events" target="_blank" rel="noopener noreferrer">stacks-java-cqrs-events repository</a></li></ol></li><li><h3 class="anchor anchorWithStickyNavbar_1iPN" id="configure-the-application">Configure the application<a aria-hidden="true" class="hash-link" href="#configure-the-application" title="Direct link to heading">â€‹</a></h3></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The application is currently configured to work with the Azure environment only.</p></div></div><p>  It uses an Azure <strong>CosmosDB</strong> database to store the example application data. So you should have access to an instance to use with the application.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For running on a local environment you can use the <a href="/docs/workloads/azure/backend/java/setting_up_cosmos_db_locally_java">Cosmos DB emulator</a> (CosmosDB Emulator has a known fixed key). There is no need for CosmosDB for the simple web API implementation (1.i above) as there is no persistence layer in it.
For further info please follow the <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/local-emulator?tabs=ssl-netstd21" target="_blank" rel="noopener noreferrer">link</a>.</p></div></div><p>Set the cosmosdb URI, databaseName and key in main application configuration file (<code>application.yml</code>) using the values coming from the CosmosDB Emulator UI.</p><div class="codeBlockContainer_21wf"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_3oXa">application.yml</div><div class="codeBlockContent_1izB yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">azure</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">cosmosdb</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">uri</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxxxxx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>In addition, Azure <strong>ApplicationInsights</strong> is used for logging purposes. If this is unavailable, modify the application so that it doesn&#x27;t fail to startup if it can&#x27;t access ApplicationInsights, and simply log to the terminal instead.</p><div class="codeBlockContainer_21wf"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_3oXa">application.yml</div><div class="codeBlockContent_1izB yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">application-insights</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">instrumentation-key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxxxxx</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Alternatively, you can use Spring <code>local</code> profile, which is configured to not require cloud infrastructure to run. For the details, please follow the <a href="https://www.baeldung.com/spring-profiles#4-jvm-system-parameter" target="_blank" rel="noopener noreferrer">Spring Profiles</a> article.</p><p>There are two corresponding environment variables that need to be set to interact with these systems:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB text"><pre tabindex="0" class="prism-code language-text codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">COSMOSDB_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AZURE_APPLICATION_INSIGHTS_INSTRUMENTATION_KEY</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_2kG2 tabs__item--active">Unix</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_2kG2">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel">Set the two environment variables as additional variables within e.g. ~/.profile or /etc/profile.</div><div role="tabpanel" hidden="">Open the System Properties then select the Advanced tab, then click on the Environment Variables button and add the new parameters.</div></div></div><ol start="3"><li><h3 class="anchor anchorWithStickyNavbar_1iPN" id="build-and-run-the-application">Build and run the application<a aria-hidden="true" class="hash-link" href="#build-and-run-the-application" title="Direct link to heading">â€‹</a></h3><p> Note that at a minimum <a href="https://adoptopenjdk.net/" target="_blank" rel="noopener noreferrer">Java 11</a> should be installed.</p><p> Move to the <code>&lt;PROJECT-NAME&gt;/java</code> folder, then</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_2kG2 tabs__item--active">Unix</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_2kG2">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw spring-boot:run</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">mvnw.cmd spring-boot:run</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></div></div><p> For instructions on how to customise the project for your company please look in the <a href="/docs/workloads/azure/backend/java/docs/workloads/azure/backend/java/scaffolding_java">Scaffolding</a> section</p></li><li><h3 class="anchor anchorWithStickyNavbar_1iPN" id="build-and-run-the-application-using-cosmos-db-emulator">Build and run the application using Cosmos DB Emulator<a aria-hidden="true" class="hash-link" href="#build-and-run-the-application-using-cosmos-db-emulator" title="Direct link to heading">â€‹</a></h3><p>Please refer to section &quot;Determine which root certificates have been installed&quot; in <a href="/docs/workloads/azure/backend/java/docs/workloads/azure/backend/java/setting_up_cosmos_db_locally_java.">Setting Up CosmosDB Emulator</a></p><p> Move to the <code>&lt;PROJECT-NAME&gt;/java</code> folder, then
go to <code>application.yml</code> either comment out the <code>application-insights</code> block or set <code>enabled</code>  property to <code>false</code>.</p><p> In <code>logback-spring.xml</code> comment out two sections relating to the application-insights (both the appender and the logger).</p><div class="codeBlockContainer_21wf"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_3oXa">logback-spring.xml</div><div class="codeBlockContent_1izB xml"><pre tabindex="0" class="prism-code language-xml codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ch.qos.logback.core.ConsoleAppender</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">console</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">encoder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">%d{dd-MM-yyyy HH:mm:ss.SSS} %magenta([%thread]) | %X{CorrelationId} |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        %highlight(%-5level) %logger{36}.%M - %msg%n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pattern</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">encoder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">appender</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;appender class=&quot;com.microsoft.applicationinsights.logback.ApplicationInsightsAppender&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    name=&quot;aiAppender&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  &lt;/appender&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">root</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">level</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">info</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">appender-ref</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">console</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">root</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- &lt;root level=&quot;info&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;appender-ref ref=&quot;aiAppender&quot;/&gt; --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">root</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p> Set <code>COSMOSDB_KEY</code> as an environment variable and set the value to be the primary key value on the emulator.</p><br><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_2kG2 tabs__item--active">Unix</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_2kG2">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">./mvnw spring-boot:run -Dspring-boot.run.jvmArguments</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-Djavax.net.ssl.trustStore=&quot;&lt;Location of the root cosmos db certificate&gt;&quot; -Djavax.net.ssl.trustStorePassword=&quot;changeit&quot;&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">mvnw.cmd spring-boot:run -Dspring-boot.run.jvmArguments</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;-Djavax.net.ssl.trustStore=&quot;&lt;Location of the root cosmos db certificate&gt;&quot; -Djavax.net.ssl.trustStorePassword=&quot;changeit&quot;&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></div></div></li><li><h3 class="anchor anchorWithStickyNavbar_1iPN" id="verify-that-the-application-has-started">Verify that the application has started<a aria-hidden="true" class="hash-link" href="#verify-that-the-application-has-started" title="Direct link to heading">â€‹</a></h3><p>Browse to <a href="http://localhost:9000/v1/menu" target="_blank" rel="noopener noreferrer">http://localhost:9000/v1/menu</a>. This should return a valid JSON response.</p><p>The application configuration uses Swagger/OAS3 to represent the API endpoints. The Swagger UI can be viewed by directing your
browser to <a href="http://localhost:9000/swagger/index.html" target="_blank" rel="noopener noreferrer">http://localhost:9000/swagger/index.html</a>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_1iPN" id="authorization">Authorization<a aria-hidden="true" class="hash-link" href="#authorization" title="Direct link to heading">â€‹</a></h3><p>All API endpoints are (optionally) protected using <strong>Auth0</strong>. There is an <code>auth.properties</code> file within the project codebase.
If the following property within this file is set:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB text"><pre tabindex="0" class="prism-code language-text codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">auth.isEnabled=true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>then clients will need to pass an <code>Authorization</code> header containing the Bearer token generated from Auth0 as part of the endpoint request. If the value
is set to <code>false</code> then no authorization is required.</p><h4 class="anchor anchorWithStickyNavbar_1iPN" id="auth0-configuration-properties">Auth0 configuration properties<a aria-hidden="true" class="hash-link" href="#auth0-configuration-properties" title="Direct link to heading">â€‹</a></h4><p>If using Auth0 for authorization, Auth0 itself will need to be configured with both an API definition and an associated Application.
There are corresponding configuration values required for the Stacks application, within the <code>auth.properties</code> file, e.g.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB text"><pre tabindex="0" class="prism-code language-text codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">auth0.issuer=https://amidostacks.eu.auth0.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth0.apiAudience=https://amidostacks.eu.auth0.com/api/v2/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>These parameters are used to verify that the JWT supplied in the Authorization header of a request is valid.</p><h4 class="anchor anchorWithStickyNavbar_1iPN" id="swaggeroas">Swagger/OAS<a aria-hidden="true" class="hash-link" href="#swaggeroas" title="Direct link to heading">â€‹</a></h4><ul><li>Automatically generated for the project. Go to <a href="http://localhost:9000/swagger/index.html" target="_blank" rel="noopener noreferrer">Swagger Index</a> to view.</li><li>Swagger Json is here: <a href="http://localhost:9000/swagger/oas.json" target="_blank" rel="noopener noreferrer">Swagger Json</a></li></ul><h4 class="anchor anchorWithStickyNavbar_1iPN" id="health-check">Health check<a aria-hidden="true" class="hash-link" href="#health-check" title="Direct link to heading">â€‹</a></h4><ul><li>Available at: <a href="http://localhost:9000/health" target="_blank" rel="noopener noreferrer">health check</a>
(This can also be configured to run on another port)</li></ul><h2 class="anchor anchorWithStickyNavbar_1iPN" id="using-a-docker-image">Using a Docker image<a aria-hidden="true" class="hash-link" href="#using-a-docker-image" title="Direct link to heading">â€‹</a></h2><p><a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/docker-for-windows/install/</a></p><p>From the <code>&lt;PROJECT-NAME&gt;/java</code> folder, build a Docker image using e.g. the command below:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">docker build --tag stacks:1.0 </span><span class="token builtin class-name">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>This uses the <code>Dockerfile</code> in this folder to generate the Docker image.</p><p>If you have an <code>.m2</code> directory in the <code>java/</code> folder, the Docker build will attempt to copy the files inside the container and use the cached versions.</p><p>Once the Docker image is created, you can then run a Docker container based on this image using e.g.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -p </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain">:9000 -e AZURE_APPLICATION_INSIGHTS_INSTRUMENTATION_KEY -e AZURE_COSMOSDB_KEY stacks:1.0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>which passes in the two required environment variables from your own environment.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/java/setting_up_cosmos_db_locally_java"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Cosmos DB Emulator</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/java/scaffolding_java"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using the Maven Scaffolding<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-the-repository-to-build-the-java-spring-boot-rest-api-application" class="table-of-contents__link toc-highlight">Using the repository to build the Java Spring Boot Rest API application</a></li><li><a href="#running-the-application-locally" class="table-of-contents__link toc-highlight">Running the application locally</a><ul><li><a href="#authorization" class="table-of-contents__link toc-highlight">Authorization</a></li></ul></li><li><a href="#using-a-docker-image" class="table-of-contents__link toc-highlight">Using a Docker image</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Amido<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Amido Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0d297d5a.js"></script>
<script src="/assets/js/main.156a79fa.js"></script>
</body>
</html>