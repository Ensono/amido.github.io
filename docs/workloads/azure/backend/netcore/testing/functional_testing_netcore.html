<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Amido Stacks " href="/opensearch.xml"><title data-react-helmet="true">Testing the application | Amido Stacks </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://stacks.amido.com/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Testing the application | Amido Stacks "><meta data-react-helmet="true" name="description" content="Dotnet API tests examples using bddfy"><meta data-react-helmet="true" property="og:description" content="Dotnet API tests examples using bddfy"><meta data-react-helmet="true" name="keywords" content="dotnet api tests,rest,api,bddfy,xunit,shouldly,csharp,dotnet,testing"><link data-react-helmet="true" rel="shortcut icon" href="/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.27fc1a60.css">
<link rel="preload" href="/assets/js/runtime~main.56577b32.js" as="script">
<link rel="preload" href="/assets/js/main.fa460d85.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_3oOy themedImage--light_3ouy"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_3oOy themedImage--dark_3zJb"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_2iFN toggle_2ySP toggleDisabled_1pbd"><div class="toggleTrack_1bVV" role="button" tabindex="-1"><div class="toggleTrackCheck_3GBG"><span class="toggleIcon_KBSf">ðŸŒœ</span></div><div class="toggleTrackX_1jae"><span class="toggleIcon_KBSf">ðŸŒž</span></div><div class="toggleTrackThumb_2_QT"></div></div><input type="checkbox" class="toggleScreenReader_32DE" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_DkI0" type="button"></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learn about Stacks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Workloads</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/workloads">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Azure</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Frontend Web Applications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Backend Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Java Spring Boot REST API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">.NET Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/introduction_netcore">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/requirements_netcore">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore">Testing the API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/infrastructure_netcore">Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/pipeline_netcore">Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/logging_netcore">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/security_netcore">Security</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Google Cloud Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Amazon Web Services</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Infrastructure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quality Assurance</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT theme-doc-toc-mobile tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Testing the application</h1></header><p>The Automated Functional Tests is a sample project demonstrating functional testing created using BDDfy and XUnit.</p><p>The project contains the framework for testing API&#x27;s and a number of test cases to demonstrate usage of the framework.</p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="dependencies">Dependencies<a aria-hidden="true" class="hash-link" href="#dependencies" title="Direct link to heading">â€‹</a></h2><ul><li>xUnit (Test adapter)</li><li>BDDfy (BDD tool)</li><li>HttpClient (For API requests)</li><li>Shouldly (Assertions)</li></ul><h2 class="anchor anchorWithStickyNavbar_1iPN" id="running-tests">Running Tests<a aria-hidden="true" class="hash-link" href="#running-tests" title="Direct link to heading">â€‹</a></h2><p>Navigate to <code>API.FunctionalTests</code> folder and run the following command:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB bash"><pre tabindex="0" class="prism-code language-bash codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet </span><span class="token builtin class-name">test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_1iPN" id="test-folder-structure">Test Folder structure<a aria-hidden="true" class="hash-link" href="#test-folder-structure" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB text"><pre tabindex="0" class="prism-code language-text codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Builders</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   â””â”€â”€ Http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€â”€ Fixtures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€â”€ Stories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ Steps</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_1iPN" id="builders">Builders<a aria-hidden="true" class="hash-link" href="#builders" title="Direct link to heading">â€‹</a></h2><p>This folder contains builder classes that are used to create POCO&#x27;s (Plain Old CLR Object) for objects used in API requests. Ideally there should be a model for every request and response that is used within the tests. The aim of these classes is to make it as easy as possible for developers to generate the data required by API&#x27;s.</p><p>All Builder classes should inherit from <code>IBuilder.cs</code></p><h3 class="anchor anchorWithStickyNavbar_1iPN" id="http">Http<a aria-hidden="true" class="hash-link" href="#http" title="Direct link to heading">â€‹</a></h3><p>This folder contains a builder and factory for managing HttpClients within the tests.</p><ul><li><code>HttpRequestBuilder.cs</code> manages creating the HttpRequest and also the HttpClient. This is only used within <code>HttpRequestFactory.cs</code>.</li><li><code>HttpRequestFactory.cs</code> orchestrates the creation of the HttpRequest for each REST method.</li></ul><h2 class="anchor anchorWithStickyNavbar_1iPN" id="configuration">Configuration<a aria-hidden="true" class="hash-link" href="#configuration" title="Direct link to heading">â€‹</a></h2><p>This contains classes used to manage the configuration for the tests.</p><ul><li><code>ConfigModel.cs</code> is a POCO representation of the json in <code>appsettings.json</code></li><li><code>ConfigAccessor.cs</code> contains the logic required to obtain the JSON from <code>appsettings.json</code> and bind it to the <code>ConfigModel.cs</code> object. This allows the configuration to be used as a simple object.
The ConfigAccessor will automatically replace any configuration setting values with the values set in the Environment Variables on the machine running the tests.</li></ul><p>Example: In <code>appsettings.json</code> we are using the configuration setting (key-value pair) &quot;BaseUrl&quot;:&quot;<a href="http://dev.azure.amidostacks.com/api/menu/%22" target="_blank" rel="noopener noreferrer">http://dev.azure.amidostacks.com/api/menu/&quot;</a>. If there is an Environment Variable set on the current machine/build agent using <code>BaseUrl</code> key, the value in <code>appsettings.json</code> will be replaced.</p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="models">Models<a aria-hidden="true" class="hash-link" href="#models" title="Direct link to heading">â€‹</a></h2><p>These are POCO representations of entities that are used in API requests (E.g. Request body, response body). The builder classes are used to create instances of these models.</p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="tests">Tests<a aria-hidden="true" class="hash-link" href="#tests" title="Direct link to heading">â€‹</a></h2><p>This is the parent folder for all test code</p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="fixtures">Fixtures<a aria-hidden="true" class="hash-link" href="#fixtures" title="Direct link to heading">â€‹</a></h2><p>The &quot;Fixtures&quot; folder contains xUnit class fixtures. These class fixtures are used to create test context for the tests. The fixture is where you can put fixture setup (via constructor) and teardown (Via <code>Dispose()</code>)</p><p>See <a href="https://xunit.net/docs/shared-context" target="_blank" rel="noopener noreferrer">xUnit documentation</a> for information on different fixtures and how to use them.</p><p><code>AuthFixture.cs</code> contains methods for getting authentication tokens required in the test cases.</p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="stories">Stories<a aria-hidden="true" class="hash-link" href="#stories" title="Direct link to heading">â€‹</a></h2><p>The Stories folder contains all the test cases (I.e. the BDDfy stories). Each class should represent a new test story, and within each class/story, there will be a number of test cases which test a specific feature.</p><p>Test cases within a story are defined using xUnit <code>Facts</code>. BDDfy is used to describe and orchestrate the tests.</p><p>The solution tags tests as smoke tests using xUnit <code>Traits</code>. I.e. <code>[Trait(&quot;Category&quot;, &quot;SmokeTest&quot;)]</code></p><h2 class="anchor anchorWithStickyNavbar_1iPN" id="steps">Steps<a aria-hidden="true" class="hash-link" href="#steps" title="Direct link to heading">â€‹</a></h2><p>This is where all the step definitions are created. The definitions contain the logic behind the tests and these steps are called from within the test cases found within the <code>TestCases</code> folder.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/netcore/requirements_netcore"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Requirements</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/netcore/infrastructure_netcore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Infrastructure<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#running-tests" class="table-of-contents__link toc-highlight">Running Tests</a></li><li><a href="#test-folder-structure" class="table-of-contents__link toc-highlight">Test Folder structure</a></li><li><a href="#builders" class="table-of-contents__link toc-highlight">Builders</a><ul><li><a href="#http" class="table-of-contents__link toc-highlight">Http</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#models" class="table-of-contents__link toc-highlight">Models</a></li><li><a href="#tests" class="table-of-contents__link toc-highlight">Tests</a></li><li><a href="#fixtures" class="table-of-contents__link toc-highlight">Fixtures</a></li><li><a href="#stories" class="table-of-contents__link toc-highlight">Stories</a></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Amido<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Amido Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.56577b32.js"></script>
<script src="/assets/js/main.fa460d85.js"></script>
</body>
</html>