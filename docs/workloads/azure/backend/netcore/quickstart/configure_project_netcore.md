---
id: configure_project_netcore
title: Configure the project
hide_title: true
sidebar_label: Configure the project
hide_table_of_contents: false
---

## Configure the project

It uses an Azure **CosmosDB** database to store the example application data.
There is a corresponding environment variable that needs to be set to interact with CosmosDB.

<br />

### Setting the key as a system property

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs
    defaultValue="windows"
    values={[
    {label: 'Windows', value: 'windows'},
    {label: 'Unix', value: 'unix'}
    ]}>
    <TabItem value="windows">
        Open System Properties then select the Advanced tab, then click on the Environment Variables button and add the new parameter: <strong>COSMOSDB_KEY</strong>.
    </TabItem>
    <TabItem value="unix">
        Set as additional variable within e.g. <code>~/.profile</code> or <code>/etc/profile</code>.
    </TabItem>
</Tabs>

<br />

### Set the variable specific to Visual Studio

Add `COSMOSDB_KEY` environment variable to the `launchSettings.json` file generated by Visual Studio.

```json {4} title="src/api/xxAMIDOxx.xxSTACKSxx.API/properties/launchSettings.json"
"xxAMIDOxx.xxSTACKSxx.API": {
    ...
    "ASPNETCORE_ENVIRONMENT": "Development",
        "COSMOSDB_KEY": "<Add Cosmos DB Primary Key here>"
    },
    ...
}
```

:::info
The variable is referenced in `appsettings.json`.

```json {4} title="src/api/xxAMIDOxx.xxSTACKSxx.API/appsettings.json"
"CosmosDb": {
    ...
    "SecurityKeySecret": {
        "Identifier": "COSMOSDB_KEY",
        ...
    }
}
```

:::


The value for `COSMOSDB_KEY` can be found within the emulator. See Primary Key:

![CosmosDB](/img/cosmosdb_emulator_3.png)

<br />

### Using the Cosmos DB Emulator to run the database locally

For running on local environments, you can use the [Cosmos DB emulator](https://docs.microsoft.com/en-us/azure/cosmos-db/local-emulator?tabs=ssl-netstd21).


<br />

### Not using the Cosmos DB Emulator

If not running locally, further configuration need to be changed.

Set the CosmosDB URI parameter `DatabaseAccountUri` 

```json {2} title="<PROJECT-NAME>/src/api/xxAMIDOxx.xxSTACKSxx.API/appsettings.json"
"CosmosDb": {
    "DatabaseAccountUri": "<Add CosmosDB Account URI here>",
    ...
}
```

<br />

### Create the Cosmos DB structure

Based on the template the Cosmos DB has to contain a fixed structure.

Create a collection `Stacks` with a container id `menu` and the partition key `/id`. For detailed steps follow the [guide](/docs/workloads/netcore/guide/cosmosdb/cosmosdb_configuration_netcore).



