<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-workloads/azure/backend/netcore/architecture/project_structure_netcore" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Solution Structure | Ensono Stacks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://stacks.ensono.com/docs/workloads/azure/backend/netcore/architecture/project_structure_netcore"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Solution Structure | Ensono Stacks"><meta data-rh="true" name="description" content=".NET Core REST API application - Solution Structure"><meta data-rh="true" property="og:description" content=".NET Core REST API application - Solution Structure"><meta data-rh="true" name="keywords" content=".net core,rest api,cqrs,example,template,repository,structure"><link data-rh="true" rel="icon" href="/img/icons/favicon.ico"><link data-rh="true" rel="canonical" href="https://stacks.ensono.com/docs/workloads/azure/backend/netcore/architecture/project_structure_netcore"><link data-rh="true" rel="alternate" href="https://stacks.ensono.com/docs/workloads/azure/backend/netcore/architecture/project_structure_netcore" hreflang="en"><link data-rh="true" rel="alternate" href="https://stacks.ensono.com/docs/workloads/azure/backend/netcore/architecture/project_structure_netcore" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.fc19d0f0.css">
<script src="/assets/js/runtime~main.e3b51252.js" defer="defer"></script>
<script src="/assets/js/main.b485acc2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icons/ensono-logo.svg" alt="Ensono Stacks Logo" class="custom-navbar-logo-class themedComponent_mlkZ themedComponent--light_NVdE" height="36" width="150"><img src="/img/icons/ensono-logo.svg" alt="Ensono Stacks Logo" class="custom-navbar-logo-class themedComponent_mlkZ themedComponent--dark_xIcU" height="36" width="150"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a href="https://github.com/Ensono/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://www.ensono.com/company/lets-connect/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Connect<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs">What is Ensono Stacks?</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/nx/nx_stacks">User Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/workloads">Backend Services</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/workloads/common/backend/java/intro_java">Cloud Platforms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/common/backend/java/intro_java">All</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/workloads/common/backend/java/intro_java">Azure</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/common/backend/java/intro_java">Java Spring Boot REST API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/workloads/azure/backend/netcore/introduction_netcore">.NET Core</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/introduction_netcore">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/requirements_netcore">Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/azure/backend/netcore/quickstart/web_api/create_project_netcore">Quickstart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/architecture_overview_netcore">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/architecture_overview_netcore">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/repository_overview_netcore">Repository Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/project_structure_netcore">Solution Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/data_storage_cosmosdb_netcore">Data Storage - CosmosDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/operations_events_exceptions_correlation_netcore">Operations, Events, Exceptions and Correlation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/azure/backend/netcore/architecture/swagger_configuration/configure_swagger_netcore">Swagger Configuration</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore">Functionally Testing the API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/infrastructure_netcore">Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/pipeline_netcore">Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/logging_netcore">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/security_netcore">Security</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/common/backend/java/intro_java">Amazon Web Services</a></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/workloads/azure/data/intro_data_azure">Data Platform</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/infrastructure/introduction">Infrastructure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/testing/testing_in_nx/frontend_testing_in_nx">QA</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend Services</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud Platforms</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Azure</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">.NET Core</span><meta itemprop="position" content="4"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Architecture</span><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Solution Structure</span><meta itemprop="position" content="6"></li></ul></nav><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="solution-structure">Solution Structure<a href="#solution-structure" class="hash-link" aria-label="Direct link to Solution Structure" title="Direct link to Solution Structure">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-web-api">Simple Web API<a href="#simple-web-api" class="hash-link" aria-label="Direct link to Simple Web API" title="Direct link to Simple Web API">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Solution &#x27;xxENSONOxx.xxSTACKSss.API&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.API.Models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ├── xxENSONOxx.xxSTACKSxx.API.UnitTests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-api-with-cqrs">Web API with CQRS<a href="#web-api-with-cqrs" class="hash-link" aria-label="Direct link to Web API with CQRS" title="Direct link to Web API with CQRS">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Solution &#x27;xxENSONOxx.xxSTACKSss.API&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.API.Models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.Application.CommandHandlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.Application.Integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.Application.QueryHandlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.Domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └── External</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Shared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── xxENSONOxx.xxSTACKSxx.Common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └── xxENSONOxx.xxSTACKSxx.CQRS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── Tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ├── xxENSONOxx.xxSTACKSxx.API.ComponentTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ├── xxENSONOxx.xxSTACKSxx.Common.UnitTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ├── xxENSONOxx.xxSTACKSxx.Domain.UnitTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   └── xxENSONOxx.xxSTACKSxx.Infrastructure.IntegrationTests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functions-and-worker-services">Functions and Worker Services<a href="#functions-and-worker-services" class="hash-link" aria-label="Direct link to Functions and Worker Services" title="Direct link to Functions and Worker Services">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── Functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── function-aeh-listener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   ├── xxENSONOxx.xxSTACKSxx.Listener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   └── xxENSONOxx.xxSTACKSxx.Listener.UnitTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── function-asb-listener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   ├── xxENSONOxx.xxSTACKSxx.Listener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   └── xxENSONOxx.xxSTACKSxx.Listener.UnitTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ├── function-cosmosdb-worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   ├── xxENSONOxx.xxSTACKSxx.Worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   └── xxENSONOxx.xxSTACKSxx.Worker.UnitTests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └── xxENSONOxx.xxSTACKSxx.BackgroundWorker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">API</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Application</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Domain</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Shared</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Tests</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Functions and Worker Services</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p></p><p>The API scope contains the components which are exposed publicly, such as the APIs and it&#x27;s Models.
It contains infrastructure components  responsible to arrange all dependencies within the solution.
If the API wasn&#x27;t self-hosted, the WebHost would have been added to this scope to manage the hosting concerns of the API.</p><p></p><br><h3>Company.Project.API</h3><p>The <strong>API</strong> project containing the controllers and swagger documentation. The purpose of the API project
is to expose the application via a set of REST\HTTP endpoints. The API will validate requests either by built-in
validators using DataAnnotations attributes or using FluentValidation(not included in the template).</p><p>The API is a self hosted service using .NET Core kestrel and does not require any external web server. The hosting
logic is handled by the <code>Program.cs</code> class.</p><p>The API depends on <code>ICommandHandler</code> and <code>IQueryHandler</code> abstractions and does not contain a direct reference to the
command-handlers and query-handler projects to reduce coupling. The bridge between the interface abstraction and
implementations will be provided by the infrastructure that maps the interfaces and implementations of many
components, like the queries and commands handlers, repositories, caches and so on.</p><p>Having the constructor depending on abstractions also makes the API flexible for Contract Testing, where the interfaces can me mocked
and don&#x27;t require a dependency to the Application.</p><br><h3>Company.Project.Models</h3><p>The <strong>Models</strong> exposed by the API have been pulled out of the API project to make them reusable. The
models have their own validation using <code>DataAnnotations</code>, therefore the validation id provided in the models without
dependency on third party libraries like FluentValidation, which should be implemented only if needed.</p><ul><li><p></p><p>QA have demonstrated interest in reuse of Models to avoid duplication of code in <code>API.Models</code> and <code>TestModels</code>.
The separate models project will make it easier to expose the models as NuGet packages for reuse by QA Functional Tests.</p><p></p></li><li><p>A Client SDK can be create in the future to communicate with the API, having a reusable Model, makes it easy
to write the SDK without rewriting them every time the API changes.</p></li></ul><br><h3>Company.Project.Infrastructure</h3><p>The infrastructure project is a cross cutting project responsible to tie the dependencies within the API and
application. In general, the API communicates to an Interface that abstracts away the need to have an implementation
available at API design time. It needs to know only the Commands and Queries available for each operation. The command
and query handlers are implemented in their own projects and the API does not have a direct dependency on it. The
infrastructure will be responsible to bridge the commands to handlers making the API decoupled from the
implementation.</p><p></p><p>The same happens for other components, <code>CommandHandlers</code> do not have a direct dependency in the Repository
implementation, they just expect an implementation to be injected at runtime, the real implementation will be
managed by the Infrastructure in real environments or managed by test fixtures using Mocks or Stubs during test
contexts.</p><p></p><p></p><p>In simple terms, the Infrastructure setups the IoC container with all dependencies needed to run the application.</p><p></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p></p><p>The application scope contains the projects that will handle most of the application behaviour and technical
requirements but not the actual business logic of it. It will bridge the public API and the domain logic.</p><p></p><p></p><p>They are managed into separate projects to make Commands decoupled from the Queries, in a more advanced scenario,
queries and commands could be handled within their own services, each service handling their own dependencies and
the API would make HTTP or gRPC calls to these respective services.</p><p></p><p></p><p>In this solution, we have a single API handling commands and queries and separate applications for handlers. This
approach makes flexible to either:</p><p></p><ul><li><p>Merge commands and query handlers project into a single <code>Company.Project.Application</code> project for simplicity
(Integration should still be independent) and host within the API. (current usage)</p></li><li><p>Host commands are separate from
queries on their respective services and forward the calls from the APIs.</p></li></ul><br><h3>Company.Project.Application.CommandHandlers</h3><p></p><p>The <strong>CommandHandlers</strong> contain implementations of <code>ICommandHandler</code> interface. Each handler expect it&#x27;s
own command type and handles it&#x27;s own logic.</p><p></p><p></p><p>Command Handlers orchestrate the dependencies of a commands before it is applied to a Domain object. A few common
features of a handler are:</p><p></p><ul><li>Ask the repository for the data used in the domain object, so that an operation(command) can be applied to it</li><li>Act in the domain and send the data to be handled.</li><li>Ensure the domain changes are persisted to DB by sending the domain object back to the repository to be saved</li><li>Publish related application events(not domain events) to the event hub (i.e: Kafka or Service Bus Topic)</li><li>Call external dependencies if needed, like dependent services using a gateway.</li><li>Handle non business logic, like:</li><ul><li>Ensure an object exists before executing the operations</li><li>Ensure an operation are valid against a domain object(i.e: security check)</li><li>Load configuration</li></ul><li><p><strong>Command handlers should not handle business logic</strong>. i.e:</p></li><ul><li><p>If an operation can only be executed if the domain is in a specific state or has a determined value, the condition
checks should be evaluated within the domain.</p></li><li><p>If the business rules condition requires data from source outside the domain, i.e database, services, etc, then a
domain service should be created to handle the logic like load the rules from a gateway and execute the check before
the entity is changed.</p></li></ul></ul><br><h3>Company.Project.Application.QueryHandlers</h3><p></p><p>The <strong>QueryHandlers</strong> contains the implementations of IQueryHandler interface. Each IQueryHandler expect
a QueryCriteria and return a QueryModel as the query result.</p><p></p><p></p><p>Similar to CommandHandlers, the QueryHandlers are responsible to orchestrate the dependencies of a query, on some
cases, a query might span multiple components or external services, the query handlers provides:</p><p></p><ul><li>Handle or delegate the mapping from domain data to query models.</li><li>Call repository(storage) or search provider to gather the data.</li><li>Ensure the user has permission to execute the operation.</li></ul><br><h3>Company.Project.Application.Integration</h3><p></p><p>The <strong>Integration</strong> project contains contracts(Interfaces) that must be <strong>implemented by other
assemblies</strong> to provide capabilities to the application. Contracts like <code>IMenuRepository</code> should be created
in this project and implemented in the Infrastructure project. This approach will prevent a chain of unnecessary
dependencies between projects and most specifically the Application. For example:</p><p></p><p></p><p>CommandHandler depends on <code>IMenuRepository</code>, the implementation of IRepository is done in the Infrastructure.</p><p></p><p></p><p>QueryHandlers can also have a dependency on <code>IMenuRepository</code>, that will use the same implementation from
Infrastructure, if it were created in either of them, one would have a dependency to the other.</p><p></p><p></p><p>If either CommandHandlers or QueryHandlers have a dependency on external services, a gateway could be implemented. The
gateway would be an interface with the operations we need and the <strong>implementation must be done outside of the
integration project</strong> to avoid direct dependencies to packages not required by the application. The
gateways could either be implemented in the Infrastructure for services we have total control. Similar to what we do
for repository implementations, but for <strong>external dependencies it should be implemented by an ACL (Anti
Corruption Layer)</strong>. The ACL approach is the best scenario given it leaves each dependency on their
respective projects and reduce the dependencies within the scope of the application and infrastructure. (See ACL for
more details).</p><p></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p></p><p>The Domain scope is where the business logic lives in. When a feature is implemented, the business conditions which
drive the feature are placed within the domain boundary. In BDD, the domain boundary is called Bounded context. It
is the term used to group a set of features correlated to accomplish a set of operations which should live
together.</p><p></p><p></p><p>In a micro services solution, each service will likely map to a single bounded context. In an e-commerce solution,
the bounded contexts could be described like Catalog, Checkout, Stock, and so on.</p><p></p><br><h3>Company.Project.Domain</h3><p></p><p>The domain project contains the components which map to a business domain and their respective dependencies.</p><p></p><p></p><p>In an e-Commerce solution with the bounded context Catalog, there will be Products,
Prices, Categories and so on. These could be defined in the domain as AggregateRoot, Entities or ValueObjects. All
these definitions should be created in the domain project according to the Design decisions.</p><p></p><h3>External</h3><p></p><p>The external scope contains projects that provides features provided by external dependencies, like other services or third party solutions.</p><p></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p></p><p>Share scope are projects that contains items reused across multiple projects, items like Exceptions, ExceptionsIds,
OperationIds, Commands, Queries, and so on.</p><p></p><h3>Company.Project.Common</h3><p></p><p>Common items are items that can and should be reused by multiple projects to avoid code duplication and reduce
complexity by avoiding mappings and conversions. Exceptions and Operations are some of the common items that can be
available to all projects.</p><p></p><p></p><p>Exceptions in the application should be a shared concern and every layer should understand it properly, having one
exception that is known by all layers will reduce the complexity of mapping these exceptions and adding unnecessary
try/catch blocks to raise new exceptions when needed an exception is propagated.</p><p></p><p></p><p>Operations similar to exceptions, should have unique ids that are common to all layers. An API receive a model that
will map to a command. The command should have it&#x27;s own id to be easy to diagnostic failures between the layers.</p><p></p><br><h3>Company.Project.CQRS</h3><p></p><p>CQRS contains POCO classes used between API and Application layer to pass commands and queries between each other.</p><p></p><p></p><p>The Commands and Queries are separate from the handlers to reduce the coupling between API and Application.</p><p></p><p></p><p>Like the decoupling from API, it also contains the Application Events raised within the application to be consumed by
other components or services.</p><p></p><p></p><p>CQRS should not contain any logic and is used just to provide classes that are consumed outside the application
boundary.</p><p></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h3>Company.Project.Listener (Azure Service Bus)</h3><p></p><p>The function listener contains a Azure function that is triggered by a message in a Azure Service Bus topic.</p><p></p><p></p><p>It uses a package to help with serialization and deserialization called Ensono.Stacks.Messaging.Azure.ServiceBus</p><p></p><br><h3>Company.Project.Listener.UnitTests</h3><p></p><p>Tests the function execution.</p><p></p><br><h3>Company.Project.Listener (Azure Event Hubs)</h3><p></p><p>The function listener contains a Azure function that is triggered by a message from Azure Event Hubs.</p><p></p><p></p><p>It uses a package to help with serialization and deserialization called Ensono.Stacks.Messaging.Azure.EventHub.</p><p></p><br><h3>Company.Project.Listener.UnitTests</h3><p></p><p>Tests the function execution.</p><p></p><br><h3>Company.Project.Worker</h3><p></p><p>The function Worker contains a Azure function that is triggered by a change in CosmosDb.</p><p></p><p></p><p>This change is read by the function, deserialized and an event is raised to Service Bus</p><p></p><br><h3>Company.Project.Worker.UnitTests</h3><p></p><p>Tests the function execution.</p><p></p><br><p></p><p>Resources like Repositories and gateway are mocked to provide dummy or fake the behaviour expected by the
application(or not) in order to test multiple usage scenarios of the application.</p><p></p><br><h3>Company.Project.BackgroundWorker</h3><p></p><p>The Worker service is a service triggered by messages in a Azure Service Bus topic.</p><p></p><p></p><p>It uses a package to help with serialization and deserialization called Ensono.Stacks.Messaging.Azure.ServiceBus</p><p></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p></p><p>The tests scope contains all tests that covers the application code via white box method. Tests
that are run from inside out with access to the code and testing the behaviour of the code.</p><p></p><p></p><p>Each set of tests will have a level of coverage and different level of details.</p><p></p><br><h3>Company.Project.API.ComponentTests</h3><p></p><p>The <strong>ComponentTests</strong> covers the overall service from edge to edge without external
dependencies. It starts at the API endpoints and finishes before the last service layer makes a call to a external
dependency.</p><p></p><p></p><p>Resources like Repositories and gateway are mocked to provide dummy or fake the behaviour expected by the
application(or not) in order to test multiple usage scenarios of the application.</p><p></p><p></p><p>API are(should be) also covered by Contract Tests, we might see the coverage of APIs by Component Tests as redundant
tests. Component tests could skip the coverage of the API and cover from the application (commands and queries)
layer to the service boundary(repositories and gateways), but this approach would require us to create an extra test
assert the integration between API and Application works as expected, giving us on extra test to maintain.</p><p></p><p></p><p>Component tests are similar to functional tests, both are testing features of the system with one caveat. Functional
Tests asserts a functionality by providing an Input and expecting an output according to the input provided. It does
not(should not) care how the output is generated. Component tests on the other hand assert that an input returns an
expected output and also ensure a set of expectations are met. i.e: Events are raised by the application, calls to
external services are handled accordingly; data is formatted correctly when passed to external components.</p><p></p><p></p><p>Component Tests can also be referred as Module Tests, Assembly Tests, Service Tests.</p><p></p><br><h3>Company.Project.Common.UnitTests</h3><p></p><p>Unit tests for x.y.Common project.</p><p></p><br><h3>Company.Project.Domain.UnitTests</h3><p></p><p>Unit tests for x.y.Domain project. For unit tests details please refer to Test Definitions</p><p></p><br><h3>Company.Project.Infrastructure.IntegrationTests</h3><p></p><p>Integration tests is a level of test focused on testing the interaction of two or more components and identify if
their work well together, even though you might have already Unit Test coverage of each component individually.</p><p></p><p></p><p>Integration tests are needed because in many cases the component can work properly when running independently but
fail when interacting to each components. In a unit test they work properly because we mock the dependencies with
assumptions that might not be true, and could be only be identified at runtime.</p><p></p><p></p><p>In this solution we already do integration tests between internal components either via Component Tests, where it
tests the integration between API→ Application → Domain, or via Functional Tests, testing the system as a
black box, and each interaction with the API will also assert the integration between API→ Application →
Domain → Repository → Database.</p><p></p><p></p><p>The limitation of component tests is that bugs outside the scope of test are not identified until the application is
deployed to a valid environment and tested with functional tests.</p><p></p><p></p><p>The limitation of functional tests is that it is time consuming to create and maintain. Also, functional tests are
slow because it requires a deployment of the application to be evaluated.</p><p></p><p></p><p>Integration tests bridges the gap between Component Tests and Functional Tests by covering just the integration
boundaries not tested by the component tests.</p><p></p><p></p><p>The Integration Tests implemented in the scope of this solution does not focus on testing configuration(i.e: test if
a deployed service can talk to a database). The focus is to test the implementation behaviour between
the edge components and their respective dependencies, like repositories and gateways. Examples of tests we want do
with integration testes are:</p><p></p><ul><li>Check if the data we pass to a database is keeps the format when saved and retrieved. i.e: decimal places, text
encoding, valid length,</li><li>Check if a request to a external service is valid by providing the right data, http headers like authentication
header, url path, and so one.</li><li>Check if a value is cached correctly when retrieved from an external storage.</li></ul><br><p><a href="/docs/workloads/azure/backend/netcore/architecture/testing/testing_scope_netcore">Testing Scope</a></p></div></div></div>
<br></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/workloads/azure/backend/netcore/architecture/repository_overview_netcore"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Repository Structure</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/workloads/azure/backend/netcore/architecture/data_storage_cosmosdb_netcore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Storage - CosmosDB</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ensono.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ensono<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ensono.com/company/lets-connect/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get in touch<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ensono.com/company/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers at Ensono<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Ensono/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div></div></footer><div class="footer__legal_UQWj"><div><img src="/img/icons/ensono-logo.svg" alt="Ensono logo"></div><div><span>Privacy Policy © <!-- -->2024<!-- --> Ensono, LLC. All rights reserved</span></div><div><a href="https://www.linkedin.com/company/ensono" target="_blank"><svg width="24" height="24" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a></div></div></div>
</body>
</html>