<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Amido Stacks " href="/opensearch.xml"><title data-react-helmet="true">.NET Core - Azure DevOps Pipeline | Amido Stacks </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://stacks.amido.com/docs/workloads/azure/backend/netcore/pipeline_netcore"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content=".NET Core - Azure DevOps Pipeline | Amido Stacks "><meta data-react-helmet="true" name="description" content="How to configure Azure DevOps Pipeline for .NET Core"><meta data-react-helmet="true" property="og:description" content="How to configure Azure DevOps Pipeline for .NET Core"><meta data-react-helmet="true" name="keywords" content=".net core,azure devops,configure,pipeline,setting up,template,build"><link data-react-helmet="true" rel="shortcut icon" href="/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/pipeline_netcore"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/pipeline_netcore" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/backend/netcore/pipeline_netcore" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8807cd65.css">
<link rel="preload" href="/assets/js/runtime~main.f6a70757.js" as="script">
<link rel="preload" href="/assets/js/main.fd494aa4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learn about Stacks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Workloads</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/workloads">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Common</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Azure</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Frontend Web Applications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Backend Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Java Spring Boot REST API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">.NET Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/introduction_netcore">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/requirements_netcore">Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/testing/functional_testing_netcore">Testing the API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/infrastructure_netcore">Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/backend/netcore/pipeline_netcore">Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/logging_netcore">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/backend/netcore/security_netcore">Security</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Data Platform</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Google Cloud Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Amazon Web Services</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Infrastructure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quality Assurance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Stacks CLI</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>.NET Core - Azure DevOps Pipeline</h1></header><p>The pipeline will automate provisioning and updating the .NET Core REST API with CQRS infrastructure in Azure.</p><p>Where possible, we are creating reusable steps (<a href="https://github.com/amido/stacks-pipeline-templates" target="_blank" rel="noopener noreferrer">stacks-pipeline-templates</a>) that can be pulled into any base pipeline. Reusable steps can include tasks to deploy, build, test and more.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pipeline-diagram">Pipeline Diagram<a aria-hidden="true" class="hash-link" href="#pipeline-diagram" title="Direct link to heading">â€‹</a></h2><img alt=".NET Core REST API - Azure DevOps Pipeline" src="/img/azure_netcore_azure_devops_pipeline.png"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-azure-devops">Setting up Azure DevOps<a aria-hidden="true" class="hash-link" href="#setting-up-azure-devops" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="variable-group">Variable group<a aria-hidden="true" class="hash-link" href="#variable-group" title="Direct link to heading">â€‹</a></h3><p>A variable group will need creating for storing variables to be used for testing steps. Instructions for creating a variable group can be found <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops&amp;tabs=classic#create-a-variable-group" target="_blank" rel="noopener noreferrer">here</a>. Give the variable group a name and description and make sure the <strong>Allow access to all pipelines</strong> option is checked.</p><p>Add the following variables:</p><table><thead><tr><th>Variable Name</th><th>Required for</th><th>Note</th></tr></thead><tbody><tr><td>COSMOSDB_KEY_DEV</td><td>Integration Test</td><td>Output from infrastructure deployment. Should be enabled after first pipeline run</td></tr><tr><td>COSMOSDB_NAME_DEV</td><td>Integration Test</td><td>Output from infrastructure deployment. Should be enabled after first pipeline run</td></tr><tr><td>COSMOSDB_ACCOUNT_URI_DEV</td><td>Integration Test</td><td>Output from infrastructure deployment. Should be enabled after first pipeline run</td></tr><tr><td>SONAR_ORGANIZATION</td><td>Static Code Analysis</td><td>from <a href="https://sonarcloud.io/" target="_blank" rel="noopener noreferrer">sonarcloud</a></td></tr><tr><td>SONAR_PROJECT_KEY</td><td>Static Code Analysis</td><td>from <a href="https://sonarcloud.io/" target="_blank" rel="noopener noreferrer">sonarcloud</a></td></tr><tr><td>SONAR_PROJECT_NAME</td><td>Static Code Analysis</td><td>from <a href="https://sonarcloud.io/" target="_blank" rel="noopener noreferrer">sonarcloud</a></td></tr><tr><td>SONAR_TOKEN</td><td>Static Code Analysis</td><td>from <a href="https://sonarcloud.io/" target="_blank" rel="noopener noreferrer">sonarcloud</a></td></tr><tr><td>PACT_BEARER_TOKEN</td><td>Contract Test</td><td>from <a href="https://docs.pact.io/" target="_blank" rel="noopener noreferrer">pact</a></td></tr><tr><td>PACT_BROKER</td><td>Contract Test</td><td>from <a href="https://docs.pact.io/" target="_blank" rel="noopener noreferrer">pact</a></td></tr></tbody></table><img alt="Azure .NET Core Variable Group" src="/img/azure_netcore_variable_group.png"><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update-pipeline-template-placeholders">Update pipeline template placeholders<a aria-hidden="true" class="hash-link" href="#update-pipeline-template-placeholders" title="Direct link to heading">â€‹</a></h3><p>Where possible, the scaffolding CLI will have populated the correct values in the pipeline template file <code>build/azDevops/azure/api-pipeline.yml</code>. The values that need to be manually configured, such as the variable group name setup previously, will have placeholders using the prefix <code>%REPLACE_ME_FOR</code>. We very much recommend that you go through the whole template to make sure that values are correct for your project. Once you are happy with the template, commit the changes to your repository.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-pipeline">Create the pipeline<a aria-hidden="true" class="hash-link" href="#create-the-pipeline" title="Direct link to heading">â€‹</a></h3><p>Follow the steps below to create the pipeline and trigger the initial run.</p><ol><li>In the pipelines section of Azure DevOps, select <strong>New Pipeline</strong>.</li><li>Select your repository.</li><li>Select the <strong>Existing Azure Pipelines YAML files</strong> option and enter the path <code>build/azDevops/azure/api-pipeline.yml</code></li><li>Click run and wait for the pipeline to complete.</li><li>Update the API variable group with the Cosmos DB details.</li><li>Enable Integration Tests in <code>build/azDevops/azure/api-pipeline.yml</code></li><li>Commit changes to trigger the pipeline again.</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/netcore/infrastructure_netcore"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Infrastructure</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/workloads/azure/backend/netcore/logging_netcore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Logging<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pipeline-diagram" class="table-of-contents__link toc-highlight">Pipeline Diagram</a></li><li><a href="#setting-up-azure-devops" class="table-of-contents__link toc-highlight">Setting up Azure DevOps</a><ul><li><a href="#variable-group" class="table-of-contents__link toc-highlight">Variable group</a></li><li><a href="#update-pipeline-template-placeholders" class="table-of-contents__link toc-highlight">Update pipeline template placeholders</a></li><li><a href="#create-the-pipeline" class="table-of-contents__link toc-highlight">Create the pipeline</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Amido<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Amido Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f6a70757.js"></script>
<script src="/assets/js/main.fd494aa4.js"></script>
</body>
</html>