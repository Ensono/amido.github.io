<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Amido Stacks " href="/opensearch.xml"><title data-react-helmet="true">ETL Pipeline Deployment | Amido Stacks </title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://stacks.amido.com/docs/workloads/azure/data/getting_started/etl_pipelines_deployment_azure"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ETL Pipeline Deployment | Amido Stacks "><meta data-react-helmet="true" name="description" content="Data pipelines development &amp; deployment"><meta data-react-helmet="true" property="og:description" content="Data pipelines development &amp; deployment"><meta data-react-helmet="true" name="keywords" content="datastacks,data,python,etl,cli,azure,template"><link data-react-helmet="true" rel="shortcut icon" href="/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://stacks.amido.com/docs/workloads/azure/data/getting_started/etl_pipelines_deployment_azure"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/data/getting_started/etl_pipelines_deployment_azure" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stacks.amido.com/docs/workloads/azure/data/getting_started/etl_pipelines_deployment_azure" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8807cd65.css">
<link rel="preload" href="/assets/js/runtime~main.64939f6d.js" as="script">
<link rel="preload" href="/assets/js/main.eaf51af0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_wide.svg" alt="Amido Stacks Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learn about Stacks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Workloads</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/workloads">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Common</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Azure</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Frontend Web Applications</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Backend Services</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Data Platform</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/intro_data_azure">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/requirements_data_azure">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/infrastructure_data_azure">Infrastructure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ETL Pipelines</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/dev_quickstart_data_azure">Development Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/core_data_platform_deployment_azure">Infrastructure Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/data/getting_started/etl_pipelines_deployment_azure">ETL Pipeline Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/testing_data_azure">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/security_data_azure">Security</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Google Cloud Platform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Amazon Web Services</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Infrastructure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quality Assurance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Stacks CLI</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ETL Pipeline Deployment</h1></header><hr><p>This section provides an overview of generating a new ETL ingest pipeline / data engineering workload and deploying it into a Stacks Data Platform, using the <a href="/docs/workloads/azure/data/etl_pipelines/datastacks">Datastacks</a> utility.
This aligns to the workflow shown in the <a href="/docs/workloads/azure/data/architecture/architecture_data_azure#data-engineering-workloads">deployment architecture</a> section.
It assumes all prerequisites are in place, including:</p><ul><li>A <a href="/docs/workloads/azure/data/getting_started/core_data_platform_deployment_azure">deployed Stacks data platform</a></li><li><a href="/docs/workloads/azure/data/getting_started/dev_quickstart_data_azure">Development environment set up</a></li></ul><p>This process will deploy the following resources into the project:</p><ul><li>Azure Data Factory resources (defined in Terraform / ARM)<ul><li>Linked service</li><li>Dataset</li><li>Pipeline</li></ul></li><li>Data ingest config files (JSON)</li><li>Azure DevOps CI/CD pipeline (YAML)</li><li>(optional) Spark jobs for data quality tests (Python)</li><li>Template unit tests (Python)</li><li>Template end-to-end tests (Python, Behave)</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="create-feature-branch">Create feature branch<a aria-hidden="true" class="hash-link" href="#create-feature-branch" title="Direct link to heading">â€‹</a></h2><p>Before creating a new workload using Datastacks, open the project locally and create a new branch for the workload being created, e.g.:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout -b feat/my-new-data-pipeline</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="prepare-the-datastacks-config-file">Prepare the Datastacks config file<a aria-hidden="true" class="hash-link" href="#prepare-the-datastacks-config-file" title="Direct link to heading">â€‹</a></h2><p>Datastacks requires a config file for generating a new ingest workload. This config file should be a yaml file. A sample config file is included in the <a href="https://github.com/amido/stacks-azure-data/tree/main/de_templates" target="_blank" rel="noopener noreferrer">de_templates</a> folder.</p><p>Using the sample config file as a starting point, create a new config file and populate the values relevant to your new ingest pipeline, e.g.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># `dataset_name` parameter is used to determine names of the following ADF resources:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># - pipeline: Ingest_&lt;dataset_name&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># - dataset: ds_&lt;dataset_name&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># - linked service: ls_&lt;dataset_name&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dataset_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AzureSql_MyNewExample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">pipeline_description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ingest from demo Azure SQL database using ingest config file.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data_source_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> azure_sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">key_vault_linked_service_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ls_KeyVault</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data_source_password_key_vault_secret_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sql</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data_source_connection_string_variable_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sql_connection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Azure DevOps configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ado_variable_groups_nonprod</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> amido</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">de</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nonprod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> amido</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">infra</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nonprod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nonprod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ado_variable_groups_prod</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> amido</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">de</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> amido</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">infra</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stacks</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Datalake containers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">bronze_container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> raw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">silver_container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> staging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">gold_container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curated</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="generate-project-artifacts-using-datastacks">Generate project artifacts using Datastacks<a aria-hidden="true" class="hash-link" href="#generate-project-artifacts-using-datastacks" title="Direct link to heading">â€‹</a></h2><p>Use the Datastacks CLI to generate the artifacts for the new workload, using the prepared config file (replacing <code>path_to_config_file/my_config.yaml</code> with the appropriate path). Note, a workload with Data Quality steps requires a data platform with a Databricks workspace:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Initiate Datastacks using poetry:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poetry run datastacks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Generate resources for an ingest pipeline (without Data Quality steps)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datastacks generate ingest --config</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;path_to_config_file/my_config.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Generate resources for an ingest pipeline (with added Data Quality steps)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datastacks generate ingest --config</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;path_to_config_file/my_config.yaml&quot;</span><span class="token plain"> --data-quality</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This should add new project artifacts for the workload under <code>de_workloads/ingest</code>, based on the ingest workload templates. Review the resources that have been generated.</p><p>Once reviewed, commit the resources and push the branch to the remote project repository.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-new-workload-in-non-production-environment">Deploy new workload in non-production environment<a aria-hidden="true" class="hash-link" href="#deploy-new-workload-in-non-production-environment" title="Direct link to heading">â€‹</a></h2><p>The generated workload will contain a YAML file containing a template Azure DevOps CI/CD pipeline for the workload, named <code>de-ingest-ado-pipeline.yaml</code>. This can be added as the definition for a new pipeline in Azure DevOps.</p><ol><li>Sign-in to your Azure DevOps organization and go to your project</li><li>Go to Pipelines, and then select New pipeline</li><li>Name the new pipeline to match the name of your new workload, e.g. <code>de-ingest-azuresql-mynewexample</code></li><li>For the pipeline definition, specify the YAML file in the project repository feature branch (e.g. <code>de-ingest-ado-pipeline.yaml</code>) and save</li><li>The new pipeline will require access to any Azure DevOps pipeline variable groups specified in the config file. Under each variable group, go to &#x27;Pipeline permissions&#x27; and add the new pipeline.</li><li>Run the new pipeline</li></ol><p>Running this pipeline in Azure DevOps will deploy the artifacts into the non-production (nonprod) environment and run tests. If successful, the generated resources will now be available in the nonprod Stacks environment.</p><p>Continue to make any further amendments required to the new workload, re-running the pipeline as required - for example:</p><ul><li>Update the (<code>ingest_config</code>) file with details of the data required from the new data source</li><li>(If including DQ) update the (<code>ingest_dq</code>) file with details of data quality checks required on the data</li><li>Update end-to-end tests, to ensure test coverage of the new data pipeline</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-new-workload-in-further-environments">Deploy new workload in further environments<a aria-hidden="true" class="hash-link" href="#deploy-new-workload-in-further-environments" title="Direct link to heading">â€‹</a></h2><p>It is recommended in any Stacks data platform that processes for deploying and releasing to further should be agreed and documented, ensuring sufficient review and quality assurance of any new workloads. The template CI/CD pipelines provided are based upon two platform environments (nonprod and prod) - but these may be amended depending upon the specific requirements of your project and organisation.</p><p>In the example pipeline templates:</p><ul><li>Deployment to the non-production (nonprod) environment is triggered on a feature branch when a pull request is open</li><li>Deployment to the production (prod) environment is triggered on merging to the <code>main</code> branch, followed by manual approval of the release step.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/workloads/azure/data/getting_started/core_data_platform_deployment_azure"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Infrastructure Deployment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/workloads/azure/data/getting_started/testing_data_azure"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-feature-branch" class="table-of-contents__link toc-highlight">Create feature branch</a></li><li><a href="#prepare-the-datastacks-config-file" class="table-of-contents__link toc-highlight">Prepare the Datastacks config file</a></li><li><a href="#generate-project-artifacts-using-datastacks" class="table-of-contents__link toc-highlight">Generate project artifacts using Datastacks</a></li><li><a href="#deploy-new-workload-in-non-production-environment" class="table-of-contents__link toc-highlight">Deploy new workload in non-production environment</a></li><li><a href="#deploy-new-workload-in-further-environments" class="table-of-contents__link toc-highlight">Deploy new workload in further environments</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Amido<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Amido Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.64939f6d.js"></script>
<script src="/assets/js/main.eaf51af0.js"></script>
</body>
</html>