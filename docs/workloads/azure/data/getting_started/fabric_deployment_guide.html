<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-workloads/azure/data/getting_started/fabric_deployment_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Fabric Lakehouse Deployment | Ensono Stacks</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://stacks.ensono.com/docs/workloads/azure/data/getting_started/fabric_deployment_guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Fabric Lakehouse Deployment | Ensono Stacks"><meta data-rh="true" name="description" content="Deployment of Microsoft Fabric Lakehouse through Azure Portal"><meta data-rh="true" property="og:description" content="Deployment of Microsoft Fabric Lakehouse through Azure Portal"><meta data-rh="true" name="keywords" content="data,infrastructure,adf,cicd,fabric"><link data-rh="true" rel="icon" href="/img/icons/favicon.ico"><link data-rh="true" rel="canonical" href="https://stacks.ensono.com/docs/workloads/azure/data/getting_started/fabric_deployment_guide"><link data-rh="true" rel="alternate" href="https://stacks.ensono.com/docs/workloads/azure/data/getting_started/fabric_deployment_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://stacks.ensono.com/docs/workloads/azure/data/getting_started/fabric_deployment_guide" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-EKCQBC5CSJ","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EKCQBC5CSJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EKCQBC5CSJ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.fc19d0f0.css">
<script src="/assets/js/runtime~main.a65d64b8.js" defer="defer"></script>
<script src="/assets/js/main.e415dbac.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icons/ensono-logo.svg" alt="Ensono Stacks Logo" class="custom-navbar-logo-class themedComponent_mlkZ themedComponent--light_NVdE" height="36" width="150"><img src="/img/icons/ensono-logo.svg" alt="Ensono Stacks Logo" class="custom-navbar-logo-class themedComponent_mlkZ themedComponent--dark_xIcU" height="36" width="150"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a href="https://github.com/Ensono/amido.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://www.ensono.com/company/lets-connect/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Connect<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs">What is Ensono Stacks?</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/nx/nx_stacks">User Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/workloads">Backend Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/workloads/azure/data/intro_data_azure">Data Platform</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/intro_data_azure">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/azure/data/architecture/architecture_data_azure">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/workloads/azure/data/data_engineering/data_engineering_intro_azure">Data Engineering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/workloads/azure/data/getting_started">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/requirements_data_azure">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/generate_project">1. Generate a data project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/core_data_platform_deployment_azure">2. Infrastructure Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/dev_quickstart_data_azure">3. Local Development Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/shared_resources_deployment_azure">4. Shared Resources Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/example_data_source">5. Example Data Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/ingest_pipeline_deployment_azure">6. Data Ingest Pipeline Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workloads/azure/data/getting_started/processing_pipeline_deployment_azure">7. Data Processing Pipeline Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workloads/azure/data/getting_started/fabric_deployment_guide">8. Fabric Lakehouse Deployment</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/infrastructure/introduction">Infrastructure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/testing/testing_in_nx/frontend_testing_in_nx">QA</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Data Platform</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">8. Fabric Lakehouse Deployment</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Fabric Lakehouse Deployment</h1></header><p><a href="https://learn.microsoft.com/en-us/fabric/" target="_blank" rel="noopener noreferrer">Microsoft Fabric</a> can be used to implement a <a href="/docs/workloads/azure/data/data_engineering/data_engineering_intro_azure#lakehouse-approach">lakehouse</a> layer over an Ensono Stacks Data Platform, giving full analytics capabilities over the data lake, and native integrations with tools such as Power BI.</p>
<p>This section provides step-by-step instructions on deploying a Fabric workspace, and setting up a lakehouse over your data lake. It assumes you have deployed an Ensono Stacks Data Platform, and have loaded data into the <a href="/docs/workloads/azure/data/getting_started/ingest_pipeline_deployment_azure">bronze layer</a> and <a href="/docs/workloads/azure/data/getting_started/processing_pipeline_deployment_azure">silver / gold layers</a> of the data lake.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Fabric networking</div><div class="admonitionContent_BuS1"><p>At the time of writing, some networking capabilities are not currently supported in Fabric - for example connecting to data lake storage behind a firewall or virtual network (which is the recommended approach in Ensono Stacks). Once additional key features such as this become available, this documentation will be updated and closer integrations with Ensono Stacks can be implemented.</p><p>Please refer to <a href="https://learn.microsoft.com/en-us/fabric/" target="_blank" rel="noopener noreferrer">Microsoft documentation</a> for the latest updates on Fabric and full documentation.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-create-fabric-capacity-resource">Step 1: Create Fabric capacity resource<a href="#step-1-create-fabric-capacity-resource" class="hash-link" aria-label="Direct link to Step 1: Create Fabric capacity resource" title="Direct link to Step 1: Create Fabric capacity resource">​</a></h2>
<p>The first step in setting up a Fabric Workspace is provisioning a capacity resource. Before proceeding, please refer to the official documentation for further details on <a href="https://learn.microsoft.com/en-us/fabric/enterprise/licenses#capacity-license" target="_blank" rel="noopener noreferrer">capacity licences</a>.</p>
<p>To setup a capacity resource in the Azure portal:</p>
<ol>
<li>Login to Azure portal, search for <strong>Microsft Fabric</strong> and select <strong>Create</strong>.</li>
<li>Create a Fabric capacity:<!-- -->
<ol>
<li>Select the subscription and resource group for the Fabric capacity.</li>
<li>Enter a name to identify the capacity resource (this is displayed in the Microsoft Fabric admin portal and Azure portal). The name must be unique in the selected location.</li>
<li>Select a resource size, based upon your requirements.</li>
<li>Enter a Fabric capacity administrator. The capacity administrator must be a member user or a service principal in your AAD tenant.</li>
</ol>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Ensono Stacks Fabric create" src="/assets/images/fabric_create-f04dd47a84a5f675483fbbf5f60300f0.png" width="829" height="942" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-create-a-microsoft-fabric-workspace">Step 2: Create a Microsoft Fabric Workspace<a href="#step-2-create-a-microsoft-fabric-workspace" class="hash-link" aria-label="Direct link to Step 2: Create a Microsoft Fabric Workspace" title="Direct link to Step 2: Create a Microsoft Fabric Workspace">​</a></h2>
<p>Workspaces are places to collaborate with colleagues to create collections of items such as lakehouses, warehouses, and reports. please refer below Microsoft link for details on <a href="https://learn.microsoft.com/en-us/fabric/get-started/workspaces" target="_blank" rel="noopener noreferrer">Fabric workspaces</a>. You may create a workspace per environment, to align to your data platform. To setup a Fabric workspace:</p>
<ol>
<li>Go to <a href="https://app.fabric.microsoft.com" target="_blank" rel="noopener noreferrer">https://app.fabric.microsoft.com</a> and sign-in to your organization&#x27;s portal. You will need a Power BI Pro license and workspace admin rights on your account to create workspaces.</li>
<li>Select the <strong>Data Engineering</strong> &#x27;experience&#x27; from the left plane. Select <strong>Workspaces</strong> from the left pane, then the <strong>New Workspace</strong> button.</li>
<li>Enter the name of workspace as per your naming conventions (e.g. <code>ensono-stacks-dev-euw-fabric</code>). Under advanced options choose <strong>Fabric capacity</strong> for license mode.</li>
<li>Choose the Azure Fabric capacity resource created in Step 1 and select <strong>Apply</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Ensono Stacks Fabric workspace" src="/assets/images/fabric_choose_fabric-40c91325ec026e7a28e16f0f33dc07ae.png" width="578" height="1249" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-create-a-lakehouse">Step 3: Create a Lakehouse<a href="#step-3-create-a-lakehouse" class="hash-link" aria-label="Direct link to Step 3: Create a Lakehouse" title="Direct link to Step 3: Create a Lakehouse">​</a></h2>
<p>We will be creating a <a href="https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-overview" target="_blank" rel="noopener noreferrer">Fabric Lakehouse</a> to access the data in our data lake. To create the lakehouse:</p>
<ul>
<li>Within the newly created workspace, select <strong>New Lakehouse</strong> and enter a name for the lakehouse.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Ensono Stacks Fabric new lakehouse" src="/assets/images/fabric_new_lakehouse-8b8d2d68760b941be91ed3d8bb4dea6f.png" width="1234" height="374" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-create-lakehouse-files-shortcut">Step 4: Create Lakehouse Files shortcut<a href="#step-4-create-lakehouse-files-shortcut" class="hash-link" aria-label="Direct link to Step 4: Create Lakehouse Files shortcut" title="Direct link to Step 4: Create Lakehouse Files shortcut">​</a></h2>
<p>In our Fabric lakehouse we will be creating both <em>Files</em> and <em>Tables</em> shortcuts to our data lake storage containers:</p>
<ul>
<li><em>Files</em> shortcuts will allow us to access all objects in the data lake (regardless of file type). This allows the data to be accessed through <a href="#notebooks">Fabric notebooks</a>.</li>
<li><em>Tables</em> shortcuts can be created over Delta Lake format tables (as we have in the Silver and Gold layers of our data lake). Once added as Tables, we can run <a href="#sql-endpoint">SQL queries</a> and use the data in <a href="#power-bi">Power BI</a>.</li>
</ul>
<p>See the <a href="https://learn.microsoft.com/en-us/fabric/onelake/onelake-shortcuts" target="_blank" rel="noopener noreferrer">overview of OneLake shortcuts</a> for further information on the types of shortcut.</p>
<p>Firstly, we will create <a href="https://learn.microsoft.com/en-us/fabric/onelake/create-adls-shortcut" target="_blank" rel="noopener noreferrer">Lakehouse Files shortcuts</a> to our data lake storage containers.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Secure data lake access</div><div class="admonitionContent_BuS1"><p>As mentioned above, it is currently not possible to connect to data lake storage behind a firewall or virtual network (which is the recommended approach in Ensono Stacks). Therefore, you can currently only connect to data lake storage which is accessible from public networks. Once this functionality is available in Fabric, these instructions will be updated.</p></div></div>
<ol>
<li>Within the lakehouse, right click on <strong>Files</strong> in the left side pane and choose <strong>New shortcut</strong>.</li>
<li>Under <strong>External sources</strong> select <strong>Azure Data Lake Storage Gen2</strong>.</li>
<li>Provide connection details for your ADLS storage account:<!-- -->
<ol>
<li>Enter the URL for the ADLS Gen 2 endpoint to connect, e.g. <code>https://amidostacksdeveuwdeadls.dfs.core.windows.net/raw</code>.</li>
<li>Under <strong>Connection</strong> select <em>Create new connection</em>.</li>
<li>Set a connection name, e.g. <code>amidostacksdeveuwadls-raw</code></li>
<li>For <strong>Authentication kind</strong> select the method you will use for authenticating with the storage account, for example SAS token (see documentation on <a href="https://learn.microsoft.com/en-us/azure/ai-services/translator/document-translation/how-to-guides/create-sas-tokens?tabs=Containers" target="_blank" rel="noopener noreferrer">generating SAS tokens for a storage container</a>).</li>
</ol>
</li>
<li>Set the and name for the new shortcut, e.g. <code>amidostacksdeveuwadls-raw</code>. If you included the container name in the URL, the <strong>Sub Path</strong> should already be set (e.g. <code>/raw</code>).</li>
<li>Select <code>Create</code>. The shortcut should now be accessible under the Files directory in the lakehouse explorer panel.</li>
<li>Repeat the above steps to create a shortcut for each of the data lake containers, i.e. raw, staging, and curated.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Fabric files shortcut" src="/assets/images/fabric_files_shortcut-d3529e0e342144a32a618103ec8d2f14.png" width="470" height="646" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-create-lakehouse-tables-shortcuts">Step 5: Create Lakehouse Tables shortcuts<a href="#step-5-create-lakehouse-tables-shortcuts" class="hash-link" aria-label="Direct link to Step 5: Create Lakehouse Tables shortcuts" title="Direct link to Step 5: Create Lakehouse Tables shortcuts">​</a></h2>
<p>Tables shortcuts will allow us to interact with query and interact with data stored in Delta Lake format. At present, external tables must be added as shortcuts individually to be fully accessible from the lakehouse.</p>
<p>Follow these steps for each of the tables in the data lake staging (silver) and curated (gold) layers:</p>
<ol>
<li>Within the lakehouse, right click on <strong>Tables</strong> in the left side pane and choose <strong>New shortcut</strong>.</li>
<li>Under <strong>External sources</strong> select <strong>Azure Data Lake Storage Gen2</strong>.</li>
<li>Provide connection details for your ADLS storage account:<!-- -->
<ol>
<li>Enter the URL for the ADLS Gen 2 endpoint to connect, e.g. <code>https://amidostacksdeveuwdeadls.dfs.core.windows.net/staging</code>.</li>
<li>You may re-use the connection to this container created in the previous step.</li>
</ol>
</li>
<li>Set the and name for the new table shortcut, e.g. <code>staging_movies_links</code>. In the <strong>Sub Path</strong> provide the path to the Delta table directory in the container (e.g. <code>/staging/movies/links</code>).</li>
<li>Select <code>Create</code>. The shortcut should now be accessible under the Tables directory in the lakehouse explorer panel.</li>
<li>Repeat the above steps to create a table shortcut for each of the tables required in the staging and curated containers.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Fabric tables shortcut" src="/assets/images/fabric_tables_shortcut-ae0d9ca865a4f778a20eb8bbb7e63368.png" width="381" height="280" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-interacting-with-data-in-the-lakehouse">Step 6: Interacting with data in the lakehouse<a href="#step-6-interacting-with-data-in-the-lakehouse" class="hash-link" aria-label="Direct link to Step 6: Interacting with data in the lakehouse" title="Direct link to Step 6: Interacting with data in the lakehouse">​</a></h2>
<p>Once shortcuts have been added, data in the Lakehouse can be used within Fabric in a number of ways:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sql-endpoint">SQL Endpoint<a href="#sql-endpoint" class="hash-link" aria-label="Direct link to SQL Endpoint" title="Direct link to SQL Endpoint">​</a></h3>
<p>Tables in the lakehouse can be directly queried via the <a href="https://learn.microsoft.com/en-us/fabric/data-engineering/lakehouse-sql-endpoint" target="_blank" rel="noopener noreferrer">SQL endpoint</a>.</p>
<ol>
<li>Within the lakehouse, select the <strong>Lakehouse</strong> button from the top right corner, and select <strong>SQL Endpoint</strong>.</li>
<li>From here, all tables added as shortcuts will be appear as tables in the SQL Endpoint, within the default schema. You can query the tables using SQL. See documentation on the <a href="https://learn.microsoft.com/en-us/fabric/data-warehouse/sql-query-editor" target="_blank" rel="noopener noreferrer">SQL query editor</a> for more details.</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Tables in the Lakehouse are read-only via the SQL endpoint. Views can be created.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="power-bi">Power BI<a href="#power-bi" class="hash-link" aria-label="Direct link to Power BI" title="Direct link to Power BI">​</a></h3>
<p>Tables and views in the lakehouse integrate seamlessly with Power BI. Direct lake mode provides a default Power BI dataset from Tables in the lakehouse. See further information on <a href="https://learn.microsoft.com/en-us/fabric/data-warehouse/datasets" target="_blank" rel="noopener noreferrer">Power BI datasets in Fabric</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notebooks">Notebooks<a href="#notebooks" class="hash-link" aria-label="Direct link to Notebooks" title="Direct link to Notebooks">​</a></h3>
<p><a href="https://learn.microsoft.com/en-us/fabric/data-engineering/how-to-use-notebook" target="_blank" rel="noopener noreferrer">Fabric notebooks</a> offer Apache Spark code development over the Lakehouse. Unlike the SQL endpoint which can only query lakehouse <em>Tables</em>, using Fabric notebooks you can also interact with lakehouse <em>Files</em> shortcuts. Within your Fabric notebooks, the path to items in the lakehouse is simply <code>Files/</code> or <code>Tables/</code>, for example:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Load data directly from Files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;delta&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Files/amidostacksdeveuwdeadls-staging/movies/movies_metadata_dq&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Display data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/workloads/azure/data/getting_started/processing_pipeline_deployment_azure"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">7. Data Processing Pipeline Deployment</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/infrastructure/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-1-create-fabric-capacity-resource" class="table-of-contents__link toc-highlight">Step 1: Create Fabric capacity resource</a></li><li><a href="#step-2-create-a-microsoft-fabric-workspace" class="table-of-contents__link toc-highlight">Step 2: Create a Microsoft Fabric Workspace</a></li><li><a href="#step-3-create-a-lakehouse" class="table-of-contents__link toc-highlight">Step 3: Create a Lakehouse</a></li><li><a href="#step-4-create-lakehouse-files-shortcut" class="table-of-contents__link toc-highlight">Step 4: Create Lakehouse Files shortcut</a></li><li><a href="#step-5-create-lakehouse-tables-shortcuts" class="table-of-contents__link toc-highlight">Step 5: Create Lakehouse Tables shortcuts</a></li><li><a href="#step-6-interacting-with-data-in-the-lakehouse" class="table-of-contents__link toc-highlight">Step 6: Interacting with data in the lakehouse</a><ul><li><a href="#sql-endpoint" class="table-of-contents__link toc-highlight">SQL Endpoint</a></li><li><a href="#power-bi" class="table-of-contents__link toc-highlight">Power BI</a></li><li><a href="#notebooks" class="table-of-contents__link toc-highlight">Notebooks</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ensono.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ensono<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ensono.com/company/lets-connect/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get in touch<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ensono.com/company/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers at Ensono<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Ensono/amido.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div></div></footer><div class="footer__legal_UQWj"><div><img src="/img/icons/ensono-logo.svg" alt="Ensono logo"></div><div><span>Privacy Policy © <!-- -->2024<!-- --> Ensono, LLC. All rights reserved</span></div><div><a href="https://www.linkedin.com/company/ensono" target="_blank"><svg width="24" height="24" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a></div></div></div>
</body>
</html>